<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>ç½‘ç«™ç”¨æˆ·è¡Œä¸ºåˆ†æï¼ˆå¤§æ•°æ®è¯¾è®¾ï¼‰ | HikğŸ£</title><meta name="author" content="éŸ©æ¢¦å©·,3102454836@qq.com"><meta name="copyright" content="éŸ©æ¢¦å©·"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ä¸€. ç¯å¢ƒæ­å»ºï¼ˆä¸€ï¼‰å®‰è£…Linuxç³»ç»Ÿ(ubuntu18.04.6)   å®‰è£…tools  ï¼ˆäºŒï¼‰å®‰è£…Hadoop åˆ›å»ºhadoopç”¨æˆ·å¦‚æœä½ å®‰è£… Ubuntu çš„æ—¶å€™ä¸æ˜¯ç”¨çš„ â€œhadoopâ€ ç”¨æˆ·ï¼Œé‚£ä¹ˆéœ€è¦å¢åŠ ä¸€ä¸ªåä¸º hadoop çš„ç”¨æˆ·ã€‚ é¦–å…ˆæŒ‰ ctrl+alt+t æ‰“å¼€ç»ˆç«¯çª—å£ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤åˆ›å»ºæ–°ç”¨æˆ·  1sudo useradd -m hadoop -s &#x2F;bin&#x2F;bash æ¥ç€ä½¿ç”¨">
<meta property="og:type" content="article">
<meta property="og:title" content="ç½‘ç«™ç”¨æˆ·è¡Œä¸ºåˆ†æï¼ˆå¤§æ•°æ®è¯¾è®¾ï¼‰">
<meta property="og:url" content="https://hanmengting.github.io/2023/10/22/%E7%BD%91%E7%AB%99%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E5%88%86%E6%9E%90%EF%BC%88%E5%A4%A7%E6%95%B0%E6%8D%AE%E8%AF%BE%E8%AE%BE%EF%BC%89/index.html">
<meta property="og:site_name" content="HikğŸ£">
<meta property="og:description" content="ä¸€. ç¯å¢ƒæ­å»ºï¼ˆä¸€ï¼‰å®‰è£…Linuxç³»ç»Ÿ(ubuntu18.04.6)   å®‰è£…tools  ï¼ˆäºŒï¼‰å®‰è£…Hadoop åˆ›å»ºhadoopç”¨æˆ·å¦‚æœä½ å®‰è£… Ubuntu çš„æ—¶å€™ä¸æ˜¯ç”¨çš„ â€œhadoopâ€ ç”¨æˆ·ï¼Œé‚£ä¹ˆéœ€è¦å¢åŠ ä¸€ä¸ªåä¸º hadoop çš„ç”¨æˆ·ã€‚ é¦–å…ˆæŒ‰ ctrl+alt+t æ‰“å¼€ç»ˆç«¯çª—å£ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤åˆ›å»ºæ–°ç”¨æˆ·  1sudo useradd -m hadoop -s &#x2F;bin&#x2F;bash æ¥ç€ä½¿ç”¨">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://img.netbian.com/file/2024/0310/161609O75fK.jpg">
<meta property="article:published_time" content="2023-10-22T10:05:55.000Z">
<meta property="article:modified_time" content="2024-04-07T08:28:02.508Z">
<meta property="article:author" content="éŸ©æ¢¦å©·">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://img.netbian.com/file/2024/0310/161609O75fK.jpg"><link rel="shortcut icon" href="https://ts1.cn.mm.bing.net/th/id/R-C.0ca4781494f9fdc7432ba6374bb1962d?rik=WQLMR7K%2beFa%2fig&riu=http%3a%2f%2fimg.touxiangwu.com%2f2020%2f3%2fbYNf22.jpg&ehk=hwyMelCP9403YdsnSLoChvJyKF0qGGFBD1E0DBjbYz4%3d&risl=&pid=ImgRaw&r=0"><link rel="canonical" href="https://hanmengting.github.io/2023/10/22/%E7%BD%91%E7%AB%99%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E5%88%86%E6%9E%90%EF%BC%88%E5%A4%A7%E6%95%B0%E6%8D%AE%E8%AF%BE%E8%AE%BE%EF%BC%89/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ç½‘ç«™ç”¨æˆ·è¡Œä¸ºåˆ†æï¼ˆå¤§æ•°æ®è¯¾è®¾ï¼‰',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-04-07 16:28:02'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://p.qqan.com/up/2020-12/16086065967661528.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">5</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> æ¸…å•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('http://img.netbian.com/file/2024/0310/161609O75fK.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="HikğŸ£"><span class="site-name">HikğŸ£</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†é¡µ</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> æ¸…å•</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">ç½‘ç«™ç”¨æˆ·è¡Œä¸ºåˆ†æï¼ˆå¤§æ•°æ®è¯¾è®¾ï¼‰</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-10-22T10:05:55.000Z" title="å‘è¡¨äº 2023-10-22 18:05:55">2023-10-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-04-07T08:28:02.508Z" title="æ›´æ–°äº 2024-04-07 16:28:02">2024-04-07</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">14.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>54åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="ç½‘ç«™ç”¨æˆ·è¡Œä¸ºåˆ†æï¼ˆå¤§æ•°æ®è¯¾è®¾ï¼‰"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="ä¸€-ç¯å¢ƒæ­å»º"><a href="#ä¸€-ç¯å¢ƒæ­å»º" class="headerlink" title="ä¸€. ç¯å¢ƒæ­å»º"></a>ä¸€. ç¯å¢ƒæ­å»º</h2><h3 id="ï¼ˆä¸€ï¼‰å®‰è£…Linuxç³»ç»Ÿ-ubuntu18-04-6"><a href="#ï¼ˆä¸€ï¼‰å®‰è£…Linuxç³»ç»Ÿ-ubuntu18-04-6" class="headerlink" title="ï¼ˆä¸€ï¼‰å®‰è£…Linuxç³»ç»Ÿ(ubuntu18.04.6)"></a>ï¼ˆä¸€ï¼‰å®‰è£…Linuxç³»ç»Ÿ(ubuntu18.04.6)</h3><p><img src="image-20230517195053166.png" alt="image-20230517195053166"></p>
<p><img src="image-20230517195108748.png" alt="image-20230517195108748"></p>
<p><img src="image-20230517195124488.png" alt="image-20230517195124488"><img src="image-20230517195246210.png" alt="image-20230517195246210"><img src="image-20230517195305286.png" alt="image-20230517195305286"><img src="image-20230517195321219.png" alt="image-20230517195321219"><img src="image-20230517195330297.png" alt="image-20230517195330297"><img src="image-20230517195339997.png" alt="image-20230517195339997"><img src="image-20230517195352004.png" alt="image-20230517195352004"><img src="image-20230517195405998.png" alt="image-20230517195405998"><img src="image-20230517195423410.png" alt="image-20230517195423410"><img src="image-20230517195453308.png" alt="image-20230517195453308"><img src="image-20230517195542174.png" alt="image-20230517195542174"><img src="image-20230517195555376.png" alt="image-20230517195555376"><img src="image-20230517195610805.png" alt="image-20230517195610805"><img src="image-20230517195621697.png" alt="image-20230517195621697"><img src="image-20230517195643898.png" alt="image-20230517195643898"><img src="image-20230517195706163.png" alt="image-20230517195706163"><img src="image-20230517195713515.png" alt="image-20230517195713515"></p>
<p>å®‰è£…tools</p>
<p><img src="image-20230517210758112.png" alt="image-20230517210758112"></p>
<h3 id="ï¼ˆäºŒï¼‰å®‰è£…Hadoop"><a href="#ï¼ˆäºŒï¼‰å®‰è£…Hadoop" class="headerlink" title="ï¼ˆäºŒï¼‰å®‰è£…Hadoop"></a>ï¼ˆäºŒï¼‰å®‰è£…Hadoop</h3><ol>
<li><h4 id="åˆ›å»ºhadoopç”¨æˆ·"><a href="#åˆ›å»ºhadoopç”¨æˆ·" class="headerlink" title="åˆ›å»ºhadoopç”¨æˆ·"></a>åˆ›å»ºhadoopç”¨æˆ·</h4><p>å¦‚æœä½ å®‰è£… Ubuntu çš„æ—¶å€™ä¸æ˜¯ç”¨çš„ â€œhadoopâ€ ç”¨æˆ·ï¼Œé‚£ä¹ˆéœ€è¦å¢åŠ ä¸€ä¸ªåä¸º hadoop çš„ç”¨æˆ·ã€‚</p>
<p>é¦–å…ˆæŒ‰ <strong>ctrl+alt+t</strong> æ‰“å¼€ç»ˆç«¯çª—å£ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤åˆ›å»ºæ–°ç”¨æˆ· </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo useradd -m hadoop -s /bin/bash</span><br></pre></td></tr></table></figure>
<p>æ¥ç€ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è®¾ç½®å¯†ç ï¼Œå¯ç®€å•è®¾ç½®ä¸º hadoopï¼ŒæŒ‰æç¤ºè¾“å…¥ä¸¤æ¬¡å¯†ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd hadoop</span><br></pre></td></tr></table></figure>
<p>å¯ä¸º hadoop ç”¨æˆ·å¢åŠ ç®¡ç†å‘˜æƒé™ï¼Œæ–¹ä¾¿éƒ¨ç½²ï¼Œé¿å…ä¸€äº›å¯¹æ–°æ‰‹æ¥è¯´æ¯”è¾ƒæ£˜æ‰‹çš„æƒé™é—®é¢˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo adduser hadoop sudo</span><br></pre></td></tr></table></figure>
<p><img src="image-20230517210933668.png" alt="image-20230517210933668" style="zoom:80%;" /></p>
</li>
<li><h4 id="æ›´æ–°apt"><a href="#æ›´æ–°apt" class="headerlink" title="æ›´æ–°apt"></a>æ›´æ–°apt</h4><p>ç”¨ hadoop ç”¨æˆ·ç™»å½•å,æˆ‘ä»¬å…ˆæ›´æ–°ä¸€ä¸‹ aptï¼Œåç»­æˆ‘ä»¬ä½¿ç”¨ apt å®‰è£…è½¯ä»¶ï¼Œå¦‚æœæ²¡æ›´æ–°å¯èƒ½æœ‰ä¸€äº›è½¯ä»¶å®‰è£…ä¸äº†ã€‚æŒ‰ ctrl+alt+t æ‰“å¼€ç»ˆç«¯çª—å£ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>
<p><img src="image-20230517211837447.png" alt="image-20230517211837447"></p>
<p>å®‰è£…ä¸€ä¸‹vim</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install vim</span><br></pre></td></tr></table></figure>
<p><img src="image-20230517213609371.png" alt="image-20230517213609371"></p>
</li>
<li><h4 id="å®‰è£…sshã€é…ç½®sshæ— å¯†ç ç™»å½•"><a href="#å®‰è£…sshã€é…ç½®sshæ— å¯†ç ç™»å½•" class="headerlink" title="å®‰è£…sshã€é…ç½®sshæ— å¯†ç ç™»å½•"></a>å®‰è£…sshã€é…ç½®sshæ— å¯†ç ç™»å½•</h4><p>é›†ç¾¤ã€å•èŠ‚ç‚¹æ¨¡å¼éƒ½éœ€è¦ç”¨åˆ° SSH ç™»é™†ï¼ˆç±»ä¼¼äºè¿œç¨‹ç™»é™†ï¼Œä½ å¯ä»¥ç™»å½•æŸå° Linux ä¸»æœºï¼Œå¹¶ä¸”åœ¨ä¸Šé¢è¿è¡Œå‘½ä»¤ï¼‰ï¼ŒUbuntu é»˜è®¤å·²å®‰è£…äº† SSH clientï¼Œæ­¤å¤–è¿˜éœ€è¦å®‰è£… SSH serverï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openssh-server</span><br></pre></td></tr></table></figure>
<p><img src="image-20230518083554707.png" alt="image-20230518083554707"></p>
<p>å®‰è£…åï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç™»é™†æœ¬æœºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh localhost</span><br></pre></td></tr></table></figure>
<p><img src="image-20230518083623870.png" alt="image-20230518083623870"></p>
<p>ä½†è¿™æ ·ç™»é™†æ˜¯éœ€è¦æ¯æ¬¡è¾“å…¥å¯†ç çš„ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®æˆSSHæ— å¯†ç ç™»é™†æ¯”è¾ƒæ–¹ä¾¿ã€‚</p>
<p>é¦–å…ˆé€€å‡ºåˆšæ‰çš„ sshï¼Œå°±å›åˆ°äº†æˆ‘ä»¬åŸå…ˆçš„ç»ˆç«¯çª—å£ï¼Œç„¶ååˆ©ç”¨ ssh-keygen ç”Ÿæˆå¯†é’¥ï¼Œå¹¶å°†å¯†é’¥åŠ å…¥åˆ°æˆæƒä¸­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">exit      # é€€å‡ºåˆšæ‰çš„ ssh localhost</span><br><span class="line">cd ~/.ssh/   #è‹¥æ²¡æœ‰è¯¥ç›®å½•è¯·å…ˆæ‰§è¡Œä¸€æ¬¡ssh localhost</span><br><span class="line">ssh-keygen -t rsa     # ä¼šæœ‰æç¤ºï¼Œéƒ½æŒ‰å›è½¦å°±å¯ä»¥</span><br><span class="line">cat ./id_rsa.pub &gt;&gt; ./authorized_keys  # åŠ å…¥æˆæƒ</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨å°±å¯ä»¥ç›´æ¥ç™»å½•äº†</p>
<p><img src="image-20230518175015962.png" alt="image-20230518175015962"></p>
</li>
<li><h4 id="å®‰è£…Javaç¯å¢ƒ"><a href="#å®‰è£…Javaç¯å¢ƒ" class="headerlink" title="å®‰è£…Javaç¯å¢ƒ"></a>å®‰è£…Javaç¯å¢ƒ</h4><p>åœ¨Linuxå‘½ä»¤è¡Œç•Œé¢ä¸­ï¼Œæ‰§è¡Œå¦‚ä¸‹Shellå‘½ä»¤ï¼ˆæ³¨æ„ï¼šå½“å‰ç™»å½•ç”¨æˆ·åæ˜¯hadoopï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/lib</span><br><span class="line">2.sudo mkdir jvm #åˆ›å»º/usr/lib/jvmç›®å½•ç”¨æ¥å­˜æ”¾JDKæ–‡ä»¶</span><br><span class="line">3.cd ~ #è¿›å…¥hadoopç”¨æˆ·çš„ä¸»ç›®å½•</span><br><span class="line">4.cd /home/hadoop  #æ³¨æ„åŒºåˆ†å¤§å°å†™å­—æ¯ï¼Œåˆšæ‰å·²ç»é€šè¿‡FTPè½¯ä»¶æŠŠJDKå®‰è£…åŒ…jdk-8u162-linux-x64.tar.gzä¸Šä¼ åˆ°è¯¥ç›®å½•ä¸‹</span><br><span class="line">5. sudo tar -zxvf /home/hadoop/jdk-8u162-linux-x64.tar.gz -C /usr/lib/  #æŠŠJDKæ–‡ä»¶è§£å‹åˆ°/usr/lib/jvmç›®å½•ä¸‹</span><br></pre></td></tr></table></figure>
<p><img src="image-20230518175124501.png" alt="image-20230518175124501"><img src="image-20230518175734613.png" alt="image-20230518175734613"></p>
<p>JDKæ–‡ä»¶è§£å‹ç¼©ä»¥åï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ°/usr/lib/jvmç›®å½•æŸ¥çœ‹ä¸€ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/lib/jvm</span><br><span class="line">2.ls</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨/usr/lib/jvmç›®å½•ä¸‹æœ‰ä¸ªjdk1.8.0_162ç›®å½•ã€‚</p>
<p><img src="image-20230518175829044.png" alt="image-20230518175829044">ä¸‹é¢ç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œè®¾ç½®ç¯å¢ƒå˜é‡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd ~</span><br><span class="line">2.vim ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤ä½¿ç”¨vimç¼–è¾‘å™¨ï¼ˆ<a target="_blank" rel="noopener" href="http://dblab.xmu.edu.cn/blog/1607-2/">æŸ¥çœ‹vimç¼–è¾‘å™¨ä½¿ç”¨æ–¹æ³•</a>ï¼‰æ‰“å¼€äº†hadoopè¿™ä¸ªç”¨æˆ·çš„ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼Œè¯·åœ¨è¿™ä¸ªæ–‡ä»¶çš„å¼€å¤´ä½ç½®ï¼Œæ·»åŠ å¦‚ä¸‹å‡ è¡Œå†…å®¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_162</span><br><span class="line">export JRE_HOME=$&#123;JAVA_HOME&#125;/jre</span><br><span class="line">export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib</span><br><span class="line">export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH</span><br></pre></td></tr></table></figure>
<p>ä¿å­˜.bashrcæ–‡ä»¶å¹¶é€€å‡ºvimç¼–è¾‘å™¨ã€‚ç„¶åï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è®©.bashrcæ–‡ä»¶çš„é…ç½®ç«‹å³ç”Ÿæ•ˆï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>
<p><img src="image-20230518175925063.png" alt="image-20230518175925063"><img src="image-20230518175956477.png" alt="image-20230518175956477"></p>
<p>è¿™æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure>
<p>å¦‚æœèƒ½å¤Ÿåœ¨å±å¹•ä¸Šè¿”å›å¦‚ä¸‹ä¿¡æ¯ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸï¼š</p>
<p><img src="image-20230518180021388.png" alt="image-20230518180021388"></p>
</li>
<li><h4 id="å®‰è£…Hadoop2-7-1"><a href="#å®‰è£…Hadoop2-7-1" class="headerlink" title="å®‰è£…Hadoop2.7.1"></a>å®‰è£…Hadoop2.7.1</h4><p>æˆ‘ä»¬é€‰æ‹©å°† Hadoop å®‰è£…è‡³ /usr/local/ ä¸­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.sudo tar -zxvf /home/hadoop/hadoop-2.7.1.tar.gz -C /usr/local    # è§£å‹åˆ°/usr/localä¸­</span><br><span class="line">2.cd /usr/local/</span><br><span class="line">3. sudo mv ./hadoop-2.7.1/ ./hadoop     # å°†æ–‡ä»¶å¤¹åæ”¹ä¸ºhadoop</span><br><span class="line">4.sudo chown -R hadoop ./hadoop       # ä¿®æ”¹æ–‡ä»¶æƒé™</span><br></pre></td></tr></table></figure>
<p><img src="image-20230518180308059.png" alt="image-20230518180308059"></p>
<p><img src="image-20230518180437612.png" alt="image-20230518180437612"></p>
<p>Hadoop è§£å‹åå³å¯ä½¿ç”¨ã€‚è¾“å…¥å¦‚ä¸‹å‘½ä»¤æ¥æ£€æŸ¥ Hadoop æ˜¯å¦å¯ç”¨ï¼ŒæˆåŠŸåˆ™ä¼šæ˜¾ç¤º Hadoop ç‰ˆæœ¬ä¿¡æ¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/hadoop</span><br><span class="line">./bin/hadoop version</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="image-20230518180542980.png" alt="image-20230518180542980"></p>
<ol>
<li><h4 id="Hadoopå•æœºé…ç½®-éåˆ†å¸ƒå¼"><a href="#Hadoopå•æœºé…ç½®-éåˆ†å¸ƒå¼" class="headerlink" title="Hadoopå•æœºé…ç½®(éåˆ†å¸ƒå¼)"></a>Hadoopå•æœºé…ç½®(éåˆ†å¸ƒå¼)</h4><p>æˆ‘ä»¬å°† input æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶ä½œä¸ºè¾“å…¥ï¼Œç­›é€‰å½“ä¸­ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼ dfs[a-z.]+ çš„å•è¯å¹¶ç»Ÿè®¡å‡ºç°çš„æ¬¡æ•°ï¼Œæœ€åè¾“å‡ºç»“æœåˆ° output æ–‡ä»¶å¤¹ä¸­ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hadoop</span><br><span class="line">2.mkdir ./input</span><br><span class="line">3.cp ./etc/hadoop/*.xml ./input   # å°†é…ç½®æ–‡ä»¶ä½œä¸ºè¾“å…¥æ–‡ä»¶</span><br><span class="line">4../bin/hadoop jar ./share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.1.jar grep ./input ./output &#x27;dfs[a-z.]+&#x27;</span><br><span class="line">5.cat ./output/*          # æŸ¥çœ‹è¿è¡Œç»“æœ</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡ŒæˆåŠŸåå¦‚ä¸‹æ‰€ç¤ºï¼Œè¾“å‡ºäº†ä½œä¸šçš„ç›¸å…³ä¿¡æ¯ï¼Œè¾“å‡ºçš„ç»“æœæ˜¯ç¬¦åˆæ­£åˆ™çš„å•è¯ dfsadmin å‡ºç°äº†1æ¬¡</p>
<p><img src="image-20230518180754600.png" alt="image-20230518180754600"></p>
<p><img src="image-20230518180732737.png" alt="image-20230518180732737"></p>
<p>Hadoop é»˜è®¤ä¸ä¼šè¦†ç›–ç»“æœæ–‡ä»¶ï¼Œå› æ­¤å†æ¬¡è¿è¡Œä¸Šé¢å®ä¾‹ä¼šæç¤ºå‡ºé”™ï¼Œéœ€è¦å…ˆå°† ./output åˆ é™¤ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -r ./output</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="image-20230518180836594.png" alt="image-20230518180836594"></p>
<ol>
<li><h4 id="Hadoopä¼ªåˆ†å¸ƒå¼é…ç½®"><a href="#Hadoopä¼ªåˆ†å¸ƒå¼é…ç½®" class="headerlink" title="Hadoopä¼ªåˆ†å¸ƒå¼é…ç½®"></a>Hadoopä¼ªåˆ†å¸ƒå¼é…ç½®</h4><p>Hadoop å¯ä»¥åœ¨å•èŠ‚ç‚¹ä¸Šä»¥ä¼ªåˆ†å¸ƒå¼çš„æ–¹å¼è¿è¡Œï¼ŒHadoop è¿›ç¨‹ä»¥åˆ†ç¦»çš„ Java è¿›ç¨‹æ¥è¿è¡Œï¼ŒèŠ‚ç‚¹æ—¢ä½œä¸º NameNode ä¹Ÿä½œä¸º DataNodeï¼ŒåŒæ—¶ï¼Œè¯»å–çš„æ˜¯ HDFS ä¸­çš„æ–‡ä»¶ã€‚</p>
<p>Hadoop çš„é…ç½®æ–‡ä»¶ä½äº /usr/local/hadoop/etc/hadoop/ ä¸­ï¼Œä¼ªåˆ†å¸ƒå¼éœ€è¦ä¿®æ”¹2ä¸ªé…ç½®æ–‡ä»¶core-site.xml å’Œ hdfs-site.xml ã€‚Hadoopçš„é…ç½®æ–‡ä»¶æ˜¯ xml æ ¼å¼ï¼Œæ¯ä¸ªé…ç½®ä»¥å£°æ˜ property çš„ name å’Œ value çš„æ–¹å¼æ¥å®ç°ã€‚</p>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶core-site.xml</p>
<p><img src="image-20230518181156914.png" alt="image-20230518181156914"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/hadoop/etc/hadoop</span><br><span class="line">vim core-site.xml</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;file:/usr/local/hadoop/tmp&lt;/value&gt;</span><br><span class="line">        &lt;description&gt;Abase for other temporary directories.&lt;/description&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230518181050022.png" alt="image-20230518181050022"></p>
<p>åŒæ ·çš„ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶hdfs-site.xmlï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim hdfs-site.xml</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;1&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/name&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/data&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230518181136053.png" alt="image-20230518181136053"></p>
<p>Hadoop çš„è¿è¡Œæ–¹å¼æ˜¯ç”±é…ç½®æ–‡ä»¶å†³å®šçš„ï¼ˆè¿è¡Œ Hadoop æ—¶ä¼šè¯»å–é…ç½®æ–‡ä»¶ï¼‰ï¼Œå› æ­¤å¦‚æœéœ€è¦ä»ä¼ªåˆ†å¸ƒå¼æ¨¡å¼åˆ‡æ¢å›éåˆ†å¸ƒå¼æ¨¡å¼ï¼Œéœ€è¦åˆ é™¤ core-site.xml ä¸­çš„é…ç½®é¡¹ã€‚</p>
<p>æ­¤å¤–ï¼Œä¼ªåˆ†å¸ƒå¼è™½ç„¶åªéœ€è¦é…ç½® fs.defaultFS å’Œ dfs.replication å°±å¯ä»¥è¿è¡Œï¼ˆå®˜æ–¹æ•™ç¨‹å¦‚æ­¤ï¼‰ï¼Œä¸è¿‡è‹¥æ²¡æœ‰é…ç½® hadoop.tmp.dir å‚æ•°ï¼Œåˆ™é»˜è®¤ä½¿ç”¨çš„ä¸´æ—¶ç›®å½•ä¸º /tmp/hadoo-hadoopï¼Œè€Œè¿™ä¸ªç›®å½•åœ¨é‡å¯æ—¶æœ‰å¯èƒ½è¢«ç³»ç»Ÿæ¸…ç†æ‰ï¼Œå¯¼è‡´å¿…é¡»é‡æ–°æ‰§è¡Œ format æ‰è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬è¿›è¡Œäº†è®¾ç½®ï¼ŒåŒæ—¶ä¹ŸæŒ‡å®š dfs.namenode.name.dir å’Œ dfs.datanode.data.dirï¼Œå¦åˆ™åœ¨æ¥ä¸‹æ¥çš„æ­¥éª¤ä¸­å¯èƒ½ä¼šå‡ºé”™ã€‚</p>
<p>é…ç½®å®Œæˆåï¼Œæ‰§è¡Œ NameNode çš„æ ¼å¼åŒ–:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/hadoop</span><br><span class="line">./bin/hdfs namenode -format</span><br></pre></td></tr></table></figure>
<p>æˆåŠŸçš„è¯ï¼Œä¼šçœ‹åˆ° â€œsuccessfully formattedâ€ çš„æç¤º</p>
<p><img src="image-20230518181259011.png" alt="image-20230518181259011"></p>
<p>æ¥ç€å¼€å¯ NameNode å’Œ DataNode å®ˆæŠ¤è¿›ç¨‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hadoop</span><br><span class="line">2../sbin/start-dfs.sh  #start-dfs.shæ˜¯ä¸ªå®Œæ•´çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸­é—´æ²¡æœ‰ç©ºæ ¼</span><br></pre></td></tr></table></figure>
<p>è‹¥å‡ºç°å¦‚ä¸‹SSHæç¤ºï¼Œè¾“å…¥yeså³å¯ã€‚</p>
<p>å¯åŠ¨æ—¶å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹ WARN æç¤ºï¼šWARN util.NativeCodeLoader: Unable to load native-hadoop library for your platformâ€¦ using builtin-java classes where applicable WARN æç¤ºå¯ä»¥å¿½ç•¥ï¼Œå¹¶ä¸ä¼šå½±å“æ­£å¸¸ä½¿ç”¨ã€‚</p>
<p><img src="image-20230518181357548.png" alt="image-20230518181357548"></p>
</li>
<li><h4 id="è¿è¡ŒHadoopä¼ªåˆ†å¸ƒå¼å®ä¾‹"><a href="#è¿è¡ŒHadoopä¼ªåˆ†å¸ƒå¼å®ä¾‹" class="headerlink" title="è¿è¡ŒHadoopä¼ªåˆ†å¸ƒå¼å®ä¾‹"></a>è¿è¡ŒHadoopä¼ªåˆ†å¸ƒå¼å®ä¾‹</h4><p>ä¸Šé¢çš„å•æœºæ¨¡å¼ï¼Œvim ä¾‹å­è¯»å–çš„æ˜¯æœ¬åœ°æ•°æ®ï¼Œä¼ªåˆ†å¸ƒå¼è¯»å–çš„åˆ™æ˜¯ HDFS ä¸Šçš„æ•°æ®ã€‚è¦ä½¿ç”¨ HDFSï¼Œé¦–å…ˆéœ€è¦åœ¨ HDFS ä¸­åˆ›å»ºç”¨æˆ·ç›®å½•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/hdfs dfs -mkdir -p /user/hadoop</span><br></pre></td></tr></table></figure>
<p>æ¥ç€å°† ./etc/hadoop ä¸­çš„ xml æ–‡ä»¶ä½œä¸ºè¾“å…¥æ–‡ä»¶å¤åˆ¶åˆ°åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå³å°† /usr/local/hadoop/etc/hadoop å¤åˆ¶åˆ°åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¸­çš„ /user/hadoop/input ä¸­ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ hadoop ç”¨æˆ·ï¼Œå¹¶ä¸”å·²åˆ›å»ºç›¸åº”çš„ç”¨æˆ·ç›®å½• /user/hadoop ï¼Œå› æ­¤åœ¨å‘½ä»¤ä¸­å°±å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¦‚ inputï¼Œå…¶å¯¹åº”çš„ç»å¯¹è·¯å¾„å°±æ˜¯ /user/hadoop/input:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./bin/hdfs dfs -mkdir input</span><br><span class="line">./bin/hdfs dfs -put ./etc/hadoop/*.xml input</span><br></pre></td></tr></table></figure>
<p>å¤åˆ¶å®Œæˆåï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/hdfs dfs -ls input</span><br></pre></td></tr></table></figure>
<p><img src="image-20230518182205593.png" alt="image-20230518182205593"></p>
<p>ä¼ªåˆ†å¸ƒå¼è¿è¡Œ MapReduce ä½œä¸šçš„æ–¹å¼è·Ÿå•æœºæ¨¡å¼ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºä¼ªåˆ†å¸ƒå¼è¯»å–çš„æ˜¯HDFSä¸­çš„æ–‡ä»¶ï¼ˆå¯ä»¥å°†å•æœºæ­¥éª¤ä¸­åˆ›å»ºçš„æœ¬åœ° input æ–‡ä»¶å¤¹ï¼Œè¾“å‡ºç»“æœ output æ–‡ä»¶å¤¹éƒ½åˆ æ‰æ¥éªŒè¯è¿™ä¸€ç‚¹ï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/hadoop jar ./share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.1.jar grep input output &#x27;dfs[a-z.]+&#x27;</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹è¿è¡Œç»“æœçš„å‘½ä»¤ï¼ˆæŸ¥çœ‹çš„æ˜¯ä½äº HDFS ä¸­çš„è¾“å‡ºç»“æœï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/hdfs dfs -cat output/*</span><br></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼Œæ³¨æ„åˆ°åˆšæ‰æˆ‘ä»¬å·²ç»æ›´æ”¹äº†é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥è¿è¡Œç»“æœä¸åŒã€‚</p>
<p><img src="image-20230518182330282.png" alt="image-20230518182330282"></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¿è¡Œç»“æœå–å›åˆ°æœ¬åœ°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.rm -r ./output    # å…ˆåˆ é™¤æœ¬åœ°çš„ output æ–‡ä»¶å¤¹ï¼ˆå¦‚æœå­˜åœ¨ï¼‰</span><br><span class="line">2../bin/hdfs dfs -get output ./output     # å°† HDFS ä¸Šçš„ output æ–‡ä»¶å¤¹æ‹·è´åˆ°æœ¬æœº</span><br><span class="line">3.cat ./output/*</span><br></pre></td></tr></table></figure>
<p>Hadoop è¿è¡Œç¨‹åºæ—¶ï¼Œè¾“å‡ºç›®å½•ä¸èƒ½å­˜åœ¨ï¼Œå¦åˆ™ä¼šæç¤ºé”™è¯¯ â€œorg.apache.hadoop.mapred.FileAlreadyExistsException: Output directory hdfs://localhost:9000/user/hadoop/output already existsâ€ ï¼Œå› æ­¤è‹¥è¦å†æ¬¡æ‰§è¡Œï¼Œéœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ é™¤ output æ–‡ä»¶å¤¹:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/hdfs dfs -rm -r output    # åˆ é™¤ output æ–‡ä»¶å¤¹</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>   <img src="image-20230518182424148.png" alt="image-20230518182424148">è‹¥è¦å…³é—­ Hadoopï¼Œåˆ™è¿è¡Œ</p>
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./sbin/stop-dfs.sh</span><br></pre></td></tr></table></figure>
<p>   <img src="image-20230518182509404.png" alt="image-20230518182509404"></p>
<h3 id="ï¼ˆä¸‰ï¼‰å®‰è£…MYSQL"><a href="#ï¼ˆä¸‰ï¼‰å®‰è£…MYSQL" class="headerlink" title="ï¼ˆä¸‰ï¼‰å®‰è£…MYSQL"></a>ï¼ˆä¸‰ï¼‰å®‰è£…MYSQL</h3><ol>
<li><h4 id="ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯è¿›è¡Œmysqlå®‰è£…ï¼Œæ³¨æ„å®‰è£…å‰å…ˆæ›´æ–°ä¸€ä¸‹è½¯ä»¶æºä»¥è·å¾—æœ€æ–°ç‰ˆæœ¬ï¼š"><a href="#ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯è¿›è¡Œmysqlå®‰è£…ï¼Œæ³¨æ„å®‰è£…å‰å…ˆæ›´æ–°ä¸€ä¸‹è½¯ä»¶æºä»¥è·å¾—æœ€æ–°ç‰ˆæœ¬ï¼š" class="headerlink" title="ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯è¿›è¡Œmysqlå®‰è£…ï¼Œæ³¨æ„å®‰è£…å‰å…ˆæ›´æ–°ä¸€ä¸‹è½¯ä»¶æºä»¥è·å¾—æœ€æ–°ç‰ˆæœ¬ï¼š"></a>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯è¿›è¡Œmysqlå®‰è£…ï¼Œæ³¨æ„å®‰è£…å‰å…ˆæ›´æ–°ä¸€ä¸‹è½¯ä»¶æºä»¥è·å¾—æœ€æ–°ç‰ˆæœ¬ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update  #æ›´æ–°è½¯ä»¶æº</span><br><span class="line">sudo apt-get install mysql-server  #å®‰è£…mysql</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519111540794.png" alt="image-20230519111540794"></p>
<p>ä¸Šè¿°å‘½ä»¤ä¼šå®‰è£…ä»¥ä¸‹åŒ…ï¼š<br>apparmor<br>mysql-client-5.7<br>mysql-common<br>mysql-server<br>mysql-server-5.7<br>mysql-server-core-5.7<br>å› æ­¤æ— éœ€å†å®‰è£…mysql-clientç­‰ã€‚å®‰è£…è¿‡ç¨‹ä¼šæç¤ºè®¾ç½®mysql rootç”¨æˆ·çš„å¯†ç ï¼Œè®¾ç½®å®Œæˆåç­‰å¾…è‡ªåŠ¨å®‰è£…å³å¯ã€‚é»˜è®¤å®‰è£…å®Œæˆå°±å¯åŠ¨äº†mysql</p>
<p>å¯åŠ¨å’Œå…³é—­mysqlæœåŠ¡å™¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service mysql start</span><br><span class="line">service mysql stop</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519111625591.png" alt="image-20230519111625591"></p>
<p>ç¡®è®¤æ˜¯å¦å¯åŠ¨æˆåŠŸï¼ŒmysqlèŠ‚ç‚¹å¤„äºLISTENçŠ¶æ€è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo netstat -tap | grep mysql</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519111712578.png" alt="image-20230519111712578"></p>
<p>è¿›å…¥mysql shellç•Œé¢ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql -u root -p</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519111759996.png" alt="image-20230519111759996"></p>
<p>è§£å†³åˆ©ç”¨sqoopå¯¼å…¥MySQLä¸­æ–‡ä¹±ç çš„é—®é¢˜ï¼ˆå¯ä»¥æ’å…¥ä¸­æ–‡ï¼Œä½†ä¸èƒ½ç”¨sqoopå¯¼å…¥ä¸­æ–‡ï¼‰<br>å¯¼è‡´å¯¼å…¥æ—¶ä¸­æ–‡ä¹±ç çš„åŸå› æ˜¯character_set_serveré»˜è®¤è®¾ç½®æ˜¯latin1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &quot;char%&quot;;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519111936790.png" alt="image-20230519111936790"></p>
<p>(1)ç¼–è¾‘é…ç½®æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/mysql/mysql.conf.d/mysqld.cnf</span><br></pre></td></tr></table></figure>
<p>(2)åœ¨[mysqld]ä¸‹æ·»åŠ ä¸€è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">character_set_server=utf8</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519112148418.png" alt="image-20230519112148418"></p>
<p>(3)é‡å¯MySQLæœåŠ¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql restart</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519112305745.png" alt="image-20230519112305745"></p>
<p>(4)ç™»é™†MySQLï¼Œå¹¶æŸ¥çœ‹MySQLç›®å‰è®¾ç½®çš„ç¼–ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql -u root -p</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &quot;char%&quot;;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519112356059.png" alt="image-20230519112356059"></p>
</li>
<li><h4 id="ä¸‹è½½mysql-jdbcåŒ…"><a href="#ä¸‹è½½mysql-jdbcåŒ…" class="headerlink" title="ä¸‹è½½mysql jdbcåŒ…"></a>ä¸‹è½½mysql jdbcåŒ…</h4><p><img src="image-20230519112632655.png" alt="image-20230519112632655"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. sudo tar -zxvf /home/hadoop/mysql-connector-java.gz  #è§£å‹</span><br><span class="line">2.cp mysql-connector-java-5.1.40/mysql-connector-java-5.1.40-bin.jar  /usr/local/hive/lib #å°†mysql-connector-java-5.1.40-bin.jaræ‹·è´åˆ°/usr/local/hive/libç›®å½•ä¸‹</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519112916846.png" alt="image-20230519112916846"></p>
<p><img src="image-20230519113044007.png" alt="image-20230519113044007"></p>
<p><img src="image-20230519113115642.png" alt="image-20230519113115642"></p>
</li>
<li><h4 id="å¯åŠ¨å¹¶ç™»é™†mysql-shell"><a href="#å¯åŠ¨å¹¶ç™»é™†mysql-shell" class="headerlink" title="å¯åŠ¨å¹¶ç™»é™†mysql shell"></a>å¯åŠ¨å¹¶ç™»é™†mysql shell</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service mysql start #å¯åŠ¨mysqlæœåŠ¡</span><br><span class="line">sudo mysql -u root -p  #ç™»é™†shellç•Œé¢</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519113303077.png" alt="image-20230519113303077"></p>
</li>
<li><h4 id="æ–°å»ºhiveæ•°æ®åº“"><a href="#æ–°å»ºhiveæ•°æ®åº“" class="headerlink" title="æ–°å»ºhiveæ•°æ®åº“"></a>æ–°å»ºhiveæ•°æ®åº“</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database hive;    #è¿™ä¸ªhiveæ•°æ®åº“ä¸hive-site.xmlä¸­localhost:3306/hiveçš„hiveå¯¹åº”ï¼Œç”¨æ¥ä¿å­˜hiveå…ƒæ•°æ®</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519113451943.png" alt="image-20230519113451943"></p>
</li>
<li><h4 id="é…ç½®mysqlå…è®¸hiveæ¥å…¥"><a href="#é…ç½®mysqlå…è®¸hiveæ¥å…¥" class="headerlink" title="é…ç½®mysqlå…è®¸hiveæ¥å…¥"></a>é…ç½®mysqlå…è®¸hiveæ¥å…¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; grant all on *.* to hive@localhost identified by &#x27;hive&#x27;;   #å°†æ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰è¡¨çš„æ‰€æœ‰æƒé™èµ‹ç»™hiveç”¨æˆ·ï¼Œåé¢çš„hiveæ˜¯é…ç½®hive-site.xmlä¸­é…ç½®çš„è¿æ¥å¯†ç </span><br><span class="line">mysql&gt; flush privileges;  #åˆ·æ–°mysqlç³»ç»Ÿæƒé™å…³ç³»è¡¨</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519113555294.png" alt="image-20230519113555294"></p>
</li>
<li><h4 id="å¯åŠ¨hive"><a href="#å¯åŠ¨hive" class="headerlink" title="å¯åŠ¨hive"></a>å¯åŠ¨hive</h4><p>å¯åŠ¨hiveä¹‹å‰ï¼Œè¯·å…ˆå¯åŠ¨hadoopé›†ç¾¤</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">start-dfs.sh</span><br><span class="line">hive   #å¯åŠ¨hive</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œæˆ‘ä»¬è¿™é‡Œå·²ç»é…ç½®äº†PATHï¼Œæ‰€ä»¥ï¼Œä¸è¦æŠŠstart-all.shå’Œhiveå‘½ä»¤çš„è·¯å¾„åŠ ä¸Šã€‚å¦‚æœæ²¡æœ‰é…ç½®PATHï¼Œè¯·åŠ ä¸Šè·¯å¾„æ‰èƒ½è¿è¡Œå‘½ä»¤ï¼Œæ¯”å¦‚ï¼Œæœ¬æ•™ç¨‹Hadoopå®‰è£…ç›®å½•æ˜¯â€œ/usr/local/hadoopâ€ï¼ŒHiveçš„å®‰è£…ç›®å½•æ˜¯â€œ/usr/local/hiveâ€ï¼Œå› æ­¤ï¼Œå¯åŠ¨hadoopå’Œhiveï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢å¸¦è·¯å¾„çš„æ–¹å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/hadoop #è¿›å…¥Hadoopå®‰è£…ç›®å½•</span><br><span class="line">./sbin/start-dfs.sh</span><br><span class="line">cd /usr/local/hive</span><br><span class="line">./bin/hive</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519113853472.png" alt="image-20230519113853472"></p>
<p>å¯ä»¥åœ¨é‡Œé¢è¾“å…¥SQLè¯­å¥ï¼Œå¦‚æœè¦é€€å‡ºHiveäº¤äº’å¼æ‰§è¡Œç¯å¢ƒï¼Œå¯ä»¥è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="ï¼ˆå››ï¼‰å®‰è£…HBase"><a href="#ï¼ˆå››ï¼‰å®‰è£…HBase" class="headerlink" title="ï¼ˆå››ï¼‰å®‰è£…HBase"></a>ï¼ˆå››ï¼‰å®‰è£…HBase</h3><ol>
<li><h4 id="hbaseå®‰è£…"><a href="#hbaseå®‰è£…" class="headerlink" title="hbaseå®‰è£…"></a>hbaseå®‰è£…</h4><p>1.1 è§£å‹å®‰è£…åŒ…hbase-2.2.2-bin.tar.gzè‡³è·¯å¾„ /usr/localï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -zxvf /home/hadoop/hbase-1.1.2-bin.tar.gz -C /usr/local</span><br></pre></td></tr></table></figure>
<p>1.2 å°†è§£å‹çš„æ–‡ä»¶åhbase-2.2.2æ”¹ä¸ºhbaseï¼Œä»¥æ–¹ä¾¿ä½¿ç”¨ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv /usr/local/hbase-1.1.2 /usr/local/hbase</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519102717668.png" alt="image-20230519102717668"></p>
<p>1.3 é…ç½®ç¯å¢ƒå˜é‡</p>
<p>å°†hbaseä¸‹çš„binç›®å½•æ·»åŠ åˆ°pathä¸­ï¼Œè¿™æ ·ï¼Œå¯åŠ¨hbaseå°±æ— éœ€åˆ°/usr/local/hbaseç›®å½•ä¸‹ï¼Œå¤§å¤§çš„æ–¹ä¾¿äº†hbaseçš„ä½¿ç”¨ã€‚æ•™ç¨‹ä¸‹é¢çš„éƒ¨åˆ†è¿˜æ˜¯åˆ‡æ¢åˆ°äº†/usr/local/hbaseç›®å½•æ“ä½œï¼Œæœ‰åŠ©äºåˆå­¦è€…ç†è§£è¿è¡Œè¿‡ç¨‹ï¼Œç†Ÿç»ƒä¹‹åå¯ä»¥ä¸å¿…åˆ‡æ¢ã€‚</p>
<p>ç¼–è¾‘~/.bashrcæ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ²¡æœ‰å¼•å…¥è¿‡PATHè¯·åœ¨~/.bashrcæ–‡ä»¶å°¾è¡Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=$PATH:/usr/local/hbase/bin</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519102827892.png" alt="image-20230519102827892"></p>
<p>ç¼–è¾‘å®Œæˆåï¼Œå†æ‰§è¡Œsourceå‘½ä»¤ä½¿ä¸Šè¿°é…ç½®åœ¨å½“å‰ç»ˆç«¯ç«‹å³ç”Ÿæ•ˆï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519102901810.png" alt="image-20230519102901810"></p>
<p>1.4 æ·»åŠ HBaseæƒé™</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br><span class="line">sudo chown -R hadoop ./hbase    #å°†hbaseä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„æ‰€æœ‰è€…æ”¹ä¸ºhadoop</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519103002599.png" alt="image-20230519103002599"></p>
<p>1.5 æŸ¥çœ‹HBaseç‰ˆæœ¬ï¼Œç¡®å®šhbaseå®‰è£…æˆåŠŸ,å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/hbase/bin/hbase version</span><br></pre></td></tr></table></figure>
<p>å‘½ä»¤æ‰§è¡Œåï¼Œè¾“å‡ºä¿¡æ¯æˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="image-20230519103131786.png" alt="image-20230519103131786"></p>
</li>
<li><h4 id="hbaseé…ç½®"><a href="#hbaseé…ç½®" class="headerlink" title="hbaseé…ç½®"></a>hbaseé…ç½®</h4><p>2.1 é…ç½®/usr/local/hbase/conf/hbase-env.sh å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/local/hbase/conf/hbase-env.sh</span><br></pre></td></tr></table></figure>
<p>é…ç½®JAVA_HOMEï¼ŒHBASE_CLASSPATHï¼ŒHBASE_MANAGES_ZK.</p>
<p>HBASE_CLASSPATHè®¾ç½®ä¸ºæœ¬æœºHadoopå®‰è£…ç›®å½•ä¸‹çš„confç›®å½•ï¼ˆå³/usr/local/hadoop/confï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_162</span><br><span class="line">export HBASE_CLASSPATH=/usr/local/hadoop/confÂ </span><br><span class="line">export HBASE_MANAGES_ZK=true</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519103522037.png" alt="image-20230519103522037"></p>
<p><img src="image-20230519103539892.png" alt="image-20230519103539892"></p>
<p>2.2 é…ç½®/usr/local/hbase/conf/hbase-site.xml</p>
<p>ç”¨å‘½ä»¤viæ‰“å¼€å¹¶ç¼–è¾‘hbase-site.xmlï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/local/hbase/conf/hbase-site.xml</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹hbase.rootdirï¼ŒæŒ‡å®šHBaseæ•°æ®åœ¨HDFSä¸Šçš„å­˜å‚¨è·¯å¾„ï¼›å°†å±æ€§hbase.cluter.distributedè®¾ç½®ä¸ºtrueã€‚å‡è®¾å½“å‰Hadoopé›†ç¾¤è¿è¡Œåœ¨ä¼ªåˆ†å¸ƒå¼æ¨¡å¼ä¸‹ï¼Œåœ¨æœ¬æœºä¸Šè¿è¡Œï¼Œä¸”NameNodeè¿è¡Œåœ¨9000ç«¯å£ã€‚</p>
</li>
</ol>
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line"></span><br><span class="line">â€‹    &lt;property&gt;</span><br><span class="line"></span><br><span class="line">â€‹        &lt;name&gt;hbase.rootdir&lt;/name&gt;</span><br><span class="line"></span><br><span class="line">â€‹        &lt;value&gt;hdfs://localhost:9000/hbase&lt;/value&gt;</span><br><span class="line"></span><br><span class="line">â€‹    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">â€‹    &lt;property&gt;</span><br><span class="line"></span><br><span class="line">â€‹        &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;</span><br><span class="line"></span><br><span class="line">â€‹        &lt;value&gt;true&lt;/value&gt;</span><br><span class="line"></span><br><span class="line">â€‹    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<p>   hbase.rootdiræŒ‡å®šHBaseçš„å­˜å‚¨ç›®å½•ï¼›hbase.cluster.distributedè®¾ç½®é›†ç¾¤å¤„äºåˆ†å¸ƒå¼æ¨¡å¼.</p>
<p>   æˆªå›¾å¦‚ä¸‹ï¼š</p>
<p>   <img src="image-20230519103840982.png" alt="image-20230519103840982"></p>
<ol>
<li><h4 id="æµ‹è¯•è¿è¡ŒHBase"><a href="#æµ‹è¯•è¿è¡ŒHBase" class="headerlink" title="æµ‹è¯•è¿è¡ŒHBase"></a>æµ‹è¯•è¿è¡ŒHBase</h4><p>ç¬¬ä¸€æ­¥ï¼šé¦–å…ˆç™»é™†sshï¼Œä¹‹å‰è®¾ç½®äº†æ— å¯†ç ç™»é™†ï¼Œå› æ­¤è¿™é‡Œä¸éœ€è¦å¯†ç ï¼›å†åˆ‡æ¢ç›®å½•è‡³/usr/local/hadoop ï¼›å†å¯åŠ¨hadoopï¼Œå¦‚æœå·²ç»å¯åŠ¨hadoopè¯·è·³è¿‡æ­¤æ­¥éª¤ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh localhost</span><br><span class="line">cd /usr/local/hadoop</span><br><span class="line">./sbin/start-dfs.sh</span><br><span class="line">jps   #èƒ½çœ‹åˆ°NameNode,DataNodeå’ŒSecondaryNameNodeéƒ½å·²ç»æˆåŠŸå¯åŠ¨ï¼Œè¡¨ç¤ºhadoopå¯åŠ¨æˆåŠŸ</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519104158678.png" alt="image-20230519104158678"></p>
<p>ç¬¬äºŒæ­¥ï¼šåˆ‡æ¢ç›®å½•è‡³/usr/local/hbase;å†å¯åŠ¨HBase.å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/hbase</span><br><span class="line">bin/start-hbase.sh</span><br><span class="line">jps  #å¯åŠ¨æˆåŠŸï¼Œè¾“å…¥å‘½ä»¤jpsï¼Œçœ‹åˆ°ä»¥ä¸‹ç•Œé¢è¯´æ˜hbaseå¯åŠ¨æˆåŠŸ</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519104353783.png" alt="image-20230519104353783"></p>
<p>è¿›å…¥shellç•Œé¢ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/hbase shell</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519104445276.png" alt="image-20230519104445276"></p>
<p>åœæ­¢HBaseè¿è¡Œ,å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/stop-hbase.sh</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519104633970.png" alt="image-20230519104633970"></p>
</li>
</ol>
<h3 id="ï¼ˆäº”ï¼‰å®‰è£…Hive"><a href="#ï¼ˆäº”ï¼‰å®‰è£…Hive" class="headerlink" title="ï¼ˆäº”ï¼‰å®‰è£…Hive"></a>ï¼ˆäº”ï¼‰å®‰è£…Hive</h3><ol>
<li><h4 id="ä¸‹è½½å¹¶åŠ å‹hiveå®‰è£…åŒ…"><a href="#ä¸‹è½½å¹¶åŠ å‹hiveå®‰è£…åŒ…" class="headerlink" title="ä¸‹è½½å¹¶åŠ å‹hiveå®‰è£…åŒ…"></a>ä¸‹è½½å¹¶åŠ å‹hiveå®‰è£…åŒ…</h4><p><img src="image-20230519110040430.png" alt="image-20230519110040430"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.sudo tar -zxvf /home/hadoop/apache-hive-1.2.1-bin.tar.gz -C /usr/local # è§£å‹åˆ°/usr/localä¸­</span><br><span class="line">2.cd /usr/local</span><br><span class="line">3.sudo mv apache-hive-1.2.1-bin hive       # å°†æ–‡ä»¶å¤¹åæ”¹ä¸ºhive</span><br><span class="line">4.sudo chown -R hadoop:hadoop hive            # ä¿®æ”¹æ–‡ä»¶æƒé™</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519110443084.png" alt="image-20230519110443084"></p>
</li>
<li><h4 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h4><p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬æŠŠhiveå‘½ä»¤åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­å»ï¼Œ<br>è¯·ä½¿ç”¨vimç¼–è¾‘å™¨æ‰“å¼€.bashrcæ–‡ä»¶ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>åœ¨è¯¥æ–‡ä»¶æœ€å‰é¢ä¸€è¡Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export HIVE_HOME=/usr/local/hive</span><br><span class="line">export PATH=$PATH:$HIVE_HOME/bin</span><br><span class="line">export HADOOP_HOME=/usr/local/hadoop</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519110818121.png" alt="image-20230519110818121"></p>
<p>HADOOP_HOMEéœ€è¦è¢«é…ç½®æˆä½ æœºå™¨ä¸ŠHadoopçš„å®‰è£…è·¯å¾„ï¼Œæ¯”å¦‚è¿™é‡Œæ˜¯å®‰è£…åœ¨/usr/local./hadoopç›®å½•ã€‚<br>ä¿å­˜é€€å‡ºåï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ä½¿é…ç½®ç«‹å³ç”Ÿæ•ˆï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519110847306.png" alt="image-20230519110847306"></p>
</li>
<li><h4 id="ä¿®æ”¹-usr-local-hive-confä¸‹çš„hive-site-xml"><a href="#ä¿®æ”¹-usr-local-hive-confä¸‹çš„hive-site-xml" class="headerlink" title="ä¿®æ”¹/usr/local/hive/confä¸‹çš„hive-site.xml"></a>ä¿®æ”¹/usr/local/hive/confä¸‹çš„hive-site.xml</h4><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/hive/conf</span><br><span class="line">mv hive-default.xml.template hive-default.xml</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519111203011.png" alt="image-20230519111203011"></p>
<p>ä¸Šé¢å‘½ä»¤æ˜¯å°†hive-default.xml.templateé‡å‘½åä¸ºhive-default.xmlï¼›<br>ç„¶åï¼Œä½¿ç”¨vimç¼–è¾‘å™¨æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶hive-site.xmlï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/hive/conf</span><br><span class="line">vim hive-site.xml</span><br></pre></td></tr></table></figure>
<p>åœ¨hive-site.xmlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ä¿¡æ¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;</span><br><span class="line">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;jdbc:mysql://localhost:3306/hive?createDatabaseIfNotExist=true&lt;/value&gt;</span><br><span class="line">    &lt;description&gt;JDBC connect string for a JDBC metastore&lt;/description&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;</span><br><span class="line">    &lt;description&gt;Driver class name for a JDBC metastore&lt;/description&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;hive&lt;/value&gt;</span><br><span class="line">    &lt;description&gt;username to use against metastore database&lt;/description&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">  &lt;property&gt;</span><br><span class="line">    &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;hive&lt;/value&gt;</span><br><span class="line">    &lt;description&gt;password to use against metastore database&lt;/description&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519111237247.png" alt="image-20230519111237247"></p>
</li>
<li><h4 id="åœ¨å®‰è£…å®Œmysqlå¹¶é…ç½®å®Œæˆä¹‹åå¯åŠ¨hive"><a href="#åœ¨å®‰è£…å®Œmysqlå¹¶é…ç½®å®Œæˆä¹‹åå¯åŠ¨hive" class="headerlink" title="åœ¨å®‰è£…å®Œmysqlå¹¶é…ç½®å®Œæˆä¹‹åå¯åŠ¨hive"></a>åœ¨å®‰è£…å®Œmysqlå¹¶é…ç½®å®Œæˆä¹‹åå¯åŠ¨hive</h4><p>å¯åŠ¨hiveä¹‹å‰ï¼Œè¯·å…ˆå¯åŠ¨hadoopé›†ç¾¤</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">start-dfs.sh</span><br><span class="line">hive   #å¯åŠ¨hive</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œæˆ‘ä»¬è¿™é‡Œå·²ç»é…ç½®äº†PATHï¼Œæ‰€ä»¥ï¼Œä¸è¦æŠŠstart-all.shå’Œhiveå‘½ä»¤çš„è·¯å¾„åŠ ä¸Šã€‚å¦‚æœæ²¡æœ‰é…ç½®PATHï¼Œè¯·åŠ ä¸Šè·¯å¾„æ‰èƒ½è¿è¡Œå‘½ä»¤ï¼Œæ¯”å¦‚ï¼Œæœ¬æ•™ç¨‹Hadoopå®‰è£…ç›®å½•æ˜¯â€œ/usr/local/hadoopâ€ï¼ŒHiveçš„å®‰è£…ç›®å½•æ˜¯â€œ/usr/local/hiveâ€ï¼Œå› æ­¤ï¼Œå¯åŠ¨hadoopå’Œhiveï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢å¸¦è·¯å¾„çš„æ–¹å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/hadoop #è¿›å…¥Hadoopå®‰è£…ç›®å½•</span><br><span class="line">./sbin/start-dfs.sh</span><br><span class="line">cd /usr/local/hive</span><br><span class="line">./bin/hive</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519113853472.png" alt="image-20230519113853472"></p>
<p>å¯ä»¥åœ¨é‡Œé¢è¾“å…¥SQLè¯­å¥ï¼Œå¦‚æœè¦é€€å‡ºHiveäº¤äº’å¼æ‰§è¡Œç¯å¢ƒï¼Œå¯ä»¥è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="ï¼ˆå…­ï¼‰å®‰è£…Eclipse"><a href="#ï¼ˆå…­ï¼‰å®‰è£…Eclipse" class="headerlink" title="ï¼ˆå…­ï¼‰å®‰è£…Eclipse"></a>ï¼ˆå…­ï¼‰å®‰è£…Eclipse</h3><p><img src="image-20230519101114286.png" alt="image-20230519101114286"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -zxvf /home/hadoop/eclipse-4.7.0-linux..gz -C /usr/local    #è§£å‹åˆ°/usr/local</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519101303827.png" alt="image-20230519101303827"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/eclipse</span><br><span class="line">./eclipse        #è¿è¡Œeclipse</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519101440184.png" alt="image-20230519101440184"></p>
<h3 id="ï¼ˆä¸ƒï¼‰å®‰è£…sqoop"><a href="#ï¼ˆä¸ƒï¼‰å®‰è£…sqoop" class="headerlink" title="ï¼ˆä¸ƒï¼‰å®‰è£…sqoop"></a>ï¼ˆä¸ƒï¼‰å®‰è£…sqoop</h3><ol>
<li><h4 id="ä¸‹è½½å¹¶è§£å‹sqoop1-4-6"><a href="#ä¸‹è½½å¹¶è§£å‹sqoop1-4-6" class="headerlink" title="ä¸‹è½½å¹¶è§£å‹sqoop1.4.6"></a>ä¸‹è½½å¹¶è§£å‹sqoop1.4.6</h4><p>ä¸‹é¢æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd ~  #è¿›å…¥å½“å‰ç”¨æˆ·çš„ç”¨æˆ·ç›®å½•</span><br><span class="line">sudo tar -zxvf /home/hadoop/sqoop-1.4.6.bin__had.gz -C /usr/local              #è§£å‹å®‰è£…æ–‡ä»¶</span><br><span class="line">cd /usr/local</span><br><span class="line">sudo mv sqoop-1.4.6.bin__hadoop-2.0.4-alpha sqoop #ä¿®æ”¹æ–‡ä»¶å</span><br><span class="line">sudo chown -R hadoop:hadoop sqoop #ä¿®æ”¹æ–‡ä»¶å¤¹å±ä¸»ï¼Œå¦‚æœä½ å½“å‰ç™»å½•ç”¨æˆ·åä¸æ˜¯hadoopï¼Œè¯·ä¿®æ”¹æˆä½ è‡ªå·±çš„ç”¨æˆ·å</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519204202670.png" alt="image-20230519204202670"><img src="image-20230519204459467.png" alt="image-20230519204459467"></p>
</li>
<li><h4 id="ä¿®æ”¹é…ç½®æ–‡ä»¶sqoop-env-sh"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶sqoop-env-sh" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶sqoop-env.sh"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶sqoop-env.sh</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd sqoop/conf/</span><br><span class="line">cat sqoop-env-template.sh  &gt;&gt; sqoop-env.sh  #å°†sqoop-env-template.shå¤åˆ¶ä¸€ä»½å¹¶å‘½åä¸ºsqoop-env.sh</span><br><span class="line">vim sqoop-env.sh #ç¼–è¾‘sqoop-env.sh</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹sqoop-env.shçš„å¦‚ä¸‹ä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export HADOOP_COMMON_HOME=/usr/local/hadoop</span><br><span class="line">export HADOOP_MAPRED_HOME=/usr/local/hadoop</span><br><span class="line">export HBASE_HOME=/usr/local/hbase</span><br><span class="line">export HIVE_HOME=/usr/local/hive</span><br><span class="line"></span><br><span class="line">#export ZOOCFGDIR= #å¦‚æœè¯»è€…é…ç½®äº†ZooKeeper,ä¹Ÿéœ€è¦åœ¨æ­¤é…ç½®ZooKeeperçš„è·¯å¾„</span><br></pre></td></tr></table></figure>
<p><img src="image-20230521150512380.png" alt="image-20230519204821964"></p>
</li>
<li><h4 id="é…ç½®ç¯å¢ƒå˜é‡-1"><a href="#é…ç½®ç¯å¢ƒå˜é‡-1" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h4><p>æ‰“å¼€å½“å‰ç”¨æˆ·çš„ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>åœ¨é…ç½®æ–‡ä»¶ç¬¬ä¸€è¡Œé”®å…¥å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export SQOOP_HOME=/usr/local/sqoop</span><br><span class="line">export PATH=$PATH:$SBT_HOME/bin:$SQOOP_HOME/bin</span><br><span class="line">export CLASSPATH=$CLASSPATH:$SQOOP_HOME/lib</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519204906298.png" alt="image-20230519204906298"></p>
<p>ä¿å­˜è¯¥æ–‡ä»¶ï¼Œé€€å‡ºvimç¼–è¾‘å™¨ã€‚<br>ç„¶åï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤è®©é…ç½®æ–‡ä»¶ç«‹å³ç”Ÿæ•ˆ:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>
<p><img src="image-20230519204935905.png" alt="image-20230519204935905"></p>
</li>
<li><h4 id="å°†mysqlé©±åŠ¨åŒ…æ‹·è´åˆ°-SQOOP-HOME-lib"><a href="#å°†mysqlé©±åŠ¨åŒ…æ‹·è´åˆ°-SQOOP-HOME-lib" class="headerlink" title="å°†mysqlé©±åŠ¨åŒ…æ‹·è´åˆ°$SQOOP_HOME/lib"></a>å°†mysqlé©±åŠ¨åŒ…æ‹·è´åˆ°$SQOOP_HOME/lib</h4><p>ä¸‹é¢è¦æŠŠMySQLé©±åŠ¨ç¨‹åºæ‹·è´åˆ°$SQOOP_HOME/libç›®å½•ä¸‹ï¼Œé¦–å…ˆè¯·åœ¨Linuxç³»ç»Ÿçš„æµè§ˆå™¨ä¸­è¯·ç‚¹å‡»<a target="_blank" rel="noopener" href="http://www.mysql.com/downloads/connector/j/">mysqlé©±åŠ¨åŒ…ä¸‹è½½åœ°å€</a>ä¸‹è½½é©±åŠ¨åŒ…ã€‚ä¸‹è½½åï¼Œä¸€èˆ¬æ–‡ä»¶ä¼šè¢«æµè§ˆå™¨é»˜è®¤æ”¾ç½®åœ¨å½“å‰ç”¨æˆ·çš„ä¸‹è½½ç›®å½•ä¸‹ï¼Œæœ¬æ•™ç¨‹é‡‡ç”¨hadoopç”¨æˆ·ç™»å½•Linuxç³»ç»Ÿï¼Œå› æ­¤ï¼Œä¸‹è½½æ–‡ä»¶è¢«é»˜è®¤æ”¾ç½®åœ¨â€œ/home/hadoop/ä¸‹è½½â€ç›®å½•ä¸‹é¢ã€‚<br>ä¸‹é¢æ‰§è¡Œå‘½ä»¤æ‹·è´æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd /home/hadoop #åˆ‡æ¢åˆ°ä¸‹è½½è·¯å¾„ï¼Œå¦‚æœä½ ä¸‹è½½çš„æ–‡ä»¶ä¸åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œè¯·åˆ‡æ¢åˆ°ä¸‹è½½æ–‡ä»¶æ‰€ä¿å­˜çš„ç›®å½•</span><br><span class="line">sudo tar -zxvf /home/hadoop/mysql-connector-java-5.1.49.tar.gz  #è§£å‹mysqlé©±åŠ¨åŒ…</span><br><span class="line">ls #è¿™æ—¶å°±å¯ä»¥çœ‹åˆ°è§£å‹ç¼©åå¾—åˆ°çš„ç›®å½•mysql-connector-java-5.1.49</span><br><span class="line"></span><br><span class="line">cp /home/hadoop/mysql-connector-java-5.1.49/mysql-connector-java-5.1.49.jar /usr/local/sqoop/lib</span><br><span class="line"></span><br><span class="line"> cp /home/hadoop/mysql-connector-java-5.1.49/mysql-connector-java-5.1.49-bin.jar /usr/local/sqoop/lib</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="image-20230521152252175.png" alt="image-20230521152252175"></p>
</li>
<li><h4 id="æµ‹è¯•ä¸MySQLçš„è¿æ¥"><a href="#æµ‹è¯•ä¸MySQLçš„è¿æ¥" class="headerlink" title="æµ‹è¯•ä¸MySQLçš„è¿æ¥"></a>æµ‹è¯•ä¸MySQLçš„è¿æ¥</h4><p>é¦–å…ˆè¯·ç¡®ä¿mysqlæœåŠ¡å·²ç»å¯åŠ¨äº†ï¼Œå¦‚æœæ²¡æœ‰å¯åŠ¨ï¼Œè¯·æ‰§è¡Œä¸‹é¢å‘½ä»¤å¯åŠ¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql start</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°±å¯ä»¥æµ‹è¯•sqoopä¸MySQLä¹‹é—´çš„è¿æ¥æ˜¯å¦æˆåŠŸï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqoop list-databases --connect jdbc:mysql://127.0.0.1:3306/ --username root -P</span><br></pre></td></tr></table></figure>
<p>mysqlçš„æ•°æ®åº“åˆ—è¡¨æ˜¾ç¤ºåœ¨å±å¹•ä¸Šè¡¨ç¤ºè¿æ¥æˆåŠŸï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="image-20230521155219093.png" alt="image-20230521155219093"></p>
<p>é”™è¯¯åˆ†æï¼š</p>
<p>ä¸€å¼€å§‹æŠ¥é”™</p>
<p><img src="image-20230521155422875.png" alt="image-20230521155422875"></p>
<p>æ­¤æ—¶æˆ‘ç”¨çš„æ˜¯mysql-connector-java-5.1.40.tar.gz ï¼Œä½†è¿™ä¸ªé‡Œé¢æ²¡æœ‰mysql-connector-java-5.1.40.jar åŒ…ï¼Œåæ¥æ¢äº†mysql-connector-java-5.1.49.tar.gzè¿™ä¸ªï¼Œä½†ä»ç„¶æŠ¥é”™ï¼Œæˆ‘è¿›å…¥MySQLæŸ¥çœ‹äº†ä¸€ä¸‹MySQLä¸­çš„å„ä¸ªç”¨æˆ·ï¼Œå‘ç°rootç”¨æˆ·æ²¡æœ‰å¯†ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select user,host,authentication_string,password_expired from user;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230521155730450.png" alt="image-20230521155730450"></p>
<p>ç„¶åæˆ‘å°†rootç”¨æˆ·åˆ é™¤é‡æ–°åˆ›å»ºäº†rootç”¨æˆ·</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">drop user root@localhost;</span><br><span class="line">flush privileges;</span><br><span class="line">create user root@localhost identified by &#x27;root&#x27;;</span><br><span class="line">grant all privileges on *.* to root@localhost identified by &#x27;root&#x27;;</span><br><span class="line"> flush privileges;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230521155858116.png" alt="image-20230521155858116"></p>
<p>å†æ¬¡è¿æ¥æˆåŠŸäº†</p>
<p><img src="image-20230521155926497.png" alt="image-20230521155926497"></p>
</li>
</ol>
<h2 id="äºŒ-ç½‘ç«™ç”¨æˆ·è¡Œä¸ºåˆ†æ"><a href="#äºŒ-ç½‘ç«™ç”¨æˆ·è¡Œä¸ºåˆ†æ" class="headerlink" title="äºŒ.ç½‘ç«™ç”¨æˆ·è¡Œä¸ºåˆ†æ"></a>äºŒ.ç½‘ç«™ç”¨æˆ·è¡Œä¸ºåˆ†æ</h2><h3 id="ä¸€-æœ¬åœ°æ•°æ®é›†ä¸Šä¼ åˆ°æ•°æ®ä»“åº“Hive"><a href="#ä¸€-æœ¬åœ°æ•°æ®é›†ä¸Šä¼ åˆ°æ•°æ®ä»“åº“Hive" class="headerlink" title="ä¸€. æœ¬åœ°æ•°æ®é›†ä¸Šä¼ åˆ°æ•°æ®ä»“åº“Hive"></a>ä¸€. æœ¬åœ°æ•°æ®é›†ä¸Šä¼ åˆ°æ•°æ®ä»“åº“Hive</h3><h4 id="1-å®éªŒæ•°æ®é›†çš„ä¸‹è½½"><a href="#1-å®éªŒæ•°æ®é›†çš„ä¸‹è½½" class="headerlink" title="1. å®éªŒæ•°æ®é›†çš„ä¸‹è½½"></a>1. å®éªŒæ•°æ®é›†çš„ä¸‹è½½</h4><p>è¯·ç™»å½•Linuxç³»ç»Ÿï¼ˆæœ¬æ•™ç¨‹ç»Ÿä¸€é‡‡ç”¨hadoopç”¨æˆ·ç™»å½•ï¼‰ï¼Œç”¨xftpå°†æ•°æ®ä¸‹è½½åˆ°ç›¸åº”ç›®å½•ä¸‹</p>
<p><img src="image-20230520205801969.png" alt="image-20230520205801969"></p>
<p>ç°åœ¨ï¼Œè¯·åœ¨Linuxç³»ç»Ÿä¸­æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼ˆå¯ä»¥ä½¿ç”¨å¿«æ·é”®Ctrl+Alt+Tï¼‰ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /home/hadoop</span><br><span class="line">ls</span><br></pre></td></tr></table></figure>
<p><img src="image-20230520205838037.png" alt="image-20230520205838037"></p>
<p>é€šè¿‡ä¸Šé¢å‘½ä»¤ï¼Œå°±è¿›å…¥åˆ°äº†user.zipæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°æœ‰ä¸ªuser.zipæ–‡ä»¶ã€‚</p>
<p>ä¸‹é¢éœ€è¦æŠŠuser.zipè¿›è¡Œè§£å‹ç¼©ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆå»ºç«‹ä¸€ä¸ªç”¨äºè¿è¡Œæœ¬æ¡ˆä¾‹çš„ç›®å½•bigdatacaseï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local</span><br><span class="line">2.ls</span><br><span class="line">3.sudo mkdir bigdatacase</span><br><span class="line">4.//è¿™é‡Œä¼šæç¤ºä½ è¾“å…¥å½“å‰ç”¨æˆ·ï¼ˆæœ¬æ•™ç¨‹æ˜¯hadoopç”¨æˆ·åï¼‰çš„å¯†ç </span><br><span class="line">5.//ä¸‹é¢ç»™hadoopç”¨æˆ·èµ‹äºˆé’ˆå¯¹bigdatacaseç›®å½•çš„å„ç§æ“ä½œæƒé™</span><br><span class="line">6.sudo chown -R hadoop:hadoop ./bigdatacase</span><br><span class="line">7.cd bigdatacase</span><br><span class="line">8.//ä¸‹é¢åˆ›å»ºä¸€ä¸ªdatasetç›®å½•ï¼Œç”¨äºä¿å­˜æ•°æ®é›†</span><br><span class="line">9. sudo mkdir dataset</span><br><span class="line">10.//ä¸‹é¢å°±å¯ä»¥è§£å‹ç¼©user.zipæ–‡ä»¶</span><br><span class="line">11.cd ~  //è¡¨ç¤ºè¿›å…¥hadoopç”¨æˆ·çš„ç›®å½•</span><br><span class="line">12.ls</span><br><span class="line">13.unzip user.zip -d /usr/local/bigdatacase/dataset</span><br><span class="line">14.cd /usr/local/bigdatacase/dataset</span><br><span class="line">15.ls</span><br></pre></td></tr></table></figure>
<p><img src="image-20230520210442259.png" alt="image-20230520210442259"></p>
<p>ç°åœ¨ä½ å°±å¯ä»¥çœ‹åˆ°åœ¨datasetç›®å½•ä¸‹æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼šraw_user.csvå’Œsmall_user.csvã€‚<br>æˆ‘ä»¬æ‰§è¡Œä¸‹é¢å‘½ä»¤å–å‡ºå‰é¢5æ¡è®°å½•çœ‹ä¸€ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head -5 raw_user.csv</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå‰5è¡Œè®°å½•å¦‚ä¸‹ï¼š</p>
<p><img src="image-20230520210516775.png" alt="image-20230520210516775"></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œæ¯è¡Œè®°å½•éƒ½åŒ…å«5ä¸ªå­—æ®µï¼Œæ•°æ®é›†ä¸­çš„å­—æ®µåŠå…¶å«ä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">user_idï¼ˆç”¨æˆ·idï¼‰</span><br><span class="line">item_id(å•†å“id)</span><br><span class="line">behaviour_typeï¼ˆåŒ…æ‹¬æµè§ˆã€æ”¶è—ã€åŠ è´­ç‰©è½¦ã€è´­ä¹°ï¼Œå¯¹åº”å–å€¼åˆ†åˆ«æ˜¯1ã€2ã€3ã€4ï¼‰</span><br><span class="line">user_geohash(ç”¨æˆ·åœ°ç†ä½ç½®å“ˆå¸Œå€¼ï¼Œæœ‰äº›è®°å½•ä¸­æ²¡æœ‰è¿™ä¸ªå­—æ®µå€¼ï¼Œæ‰€ä»¥åé¢æˆ‘ä»¬ä¼šç”¨è„šæœ¬åšæ•°æ®é¢„å¤„ç†æ—¶æŠŠè¿™ä¸ªå­—æ®µå…¨éƒ¨åˆ é™¤)</span><br><span class="line">item_categoryï¼ˆå•†å“åˆ†ç±»ï¼‰</span><br><span class="line">timeï¼ˆè¯¥è®°å½•äº§ç”Ÿæ—¶é—´ï¼‰</span><br></pre></td></tr></table></figure>
<h4 id="2-æ•°æ®é›†çš„é¢„å¤„ç†"><a href="#2-æ•°æ®é›†çš„é¢„å¤„ç†" class="headerlink" title="2.  æ•°æ®é›†çš„é¢„å¤„ç†"></a>2.  æ•°æ®é›†çš„é¢„å¤„ç†</h4><ol>
<li><p>åˆ é™¤æ–‡ä»¶ç¬¬ä¸€è¡Œè®°å½•ï¼Œå³å­—æ®µåç§°<br>raw_userå’Œsmall_userä¸­çš„ç¬¬ä¸€è¡Œéƒ½æ˜¯å­—æ®µåç§°ï¼Œæˆ‘ä»¬åœ¨æ–‡ä»¶ä¸­çš„æ•°æ®å¯¼å…¥åˆ°æ•°æ®ä»“åº“Hiveä¸­æ—¶ï¼Œä¸éœ€è¦ç¬¬ä¸€è¡Œå­—æ®µåç§°ï¼Œå› æ­¤ï¼Œè¿™é‡Œåœ¨åšæ•°æ®é¢„å¤„ç†æ—¶ï¼Œåˆ é™¤ç¬¬ä¸€è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/bigdatacase/dataset</span><br><span class="line">2.//ä¸‹é¢åˆ é™¤raw_userä¸­çš„ç¬¬1è¡Œ</span><br><span class="line">3.sed -i &#x27;1d&#x27; raw_user.csv //1dè¡¨ç¤ºåˆ é™¤ç¬¬1è¡Œï¼ŒåŒç†ï¼Œ3dè¡¨ç¤ºåˆ é™¤ç¬¬3è¡Œï¼Œndè¡¨ç¤ºåˆ é™¤ç¬¬nè¡Œ</span><br><span class="line">4.//ä¸‹é¢åˆ é™¤small_userä¸­çš„ç¬¬1è¡Œ</span><br><span class="line">5.sed -i &#x27;1d&#x27; small_user.csv</span><br><span class="line">6.//ä¸‹é¢å†ç”¨headå‘½ä»¤å»æŸ¥çœ‹æ–‡ä»¶çš„å‰5è¡Œè®°å½•ï¼Œå°±çœ‹ä¸åˆ°å­—æ®µåç§°è¿™ä¸€è¡Œäº†</span><br><span class="line">7.head -5 raw_user.csv</span><br><span class="line">8.head -5 small_user.csv</span><br></pre></td></tr></table></figure>
<p><img src="image-20230520211434884.png" alt="image-20230520211434884"></p>
<p>æ¥ä¸‹æ¥çš„æ“ä½œä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯ç”¨small_user.csvè¿™ä¸ªå°æ•°æ®é›†è¿›è¡Œæ“ä½œï¼Œè¿™æ ·å¯ä»¥èŠ‚çœæ—¶é—´ã€‚ç­‰æ‰€æœ‰æµç¨‹éƒ½è·‘é€šä»¥åï¼Œä½ å°±å¯ä»¥ä½¿ç”¨å¤§æ•°æ®é›†raw_user.csvå»æµ‹è¯•ä¸€éäº†ã€‚</p>
</li>
<li><p>å¯¹å­—æ®µè¿›è¡Œé¢„å¤„ç†</p>
<p>ä¸‹é¢å¯¹æ•°æ®é›†è¿›è¡Œä¸€äº›é¢„å¤„ç†ï¼ŒåŒ…æ‹¬ä¸ºæ¯è¡Œè®°å½•å¢åŠ ä¸€ä¸ªidå­—æ®µï¼ˆè®©è®°å½•å…·æœ‰å”¯ä¸€æ€§ï¼‰ã€å¢åŠ ä¸€ä¸ªçœä»½å­—æ®µï¼ˆç”¨æ¥åç»­è¿›è¡Œå¯è§†åŒ–åˆ†æï¼‰ï¼Œå¹¶ä¸”ä¸¢å¼ƒuser_geohashå­—æ®µï¼ˆåé¢åˆ†æä¸éœ€è¦è¿™ä¸ªå­—æ®µï¼‰ã€‚<br>ä¸‹é¢æˆ‘ä»¬è¦å»ºä¸€ä¸ªè„šæœ¬æ–‡ä»¶pre_deal.shï¼Œè¯·æŠŠè¿™ä¸ªè„šæœ¬æ–‡ä»¶æ”¾åœ¨datasetç›®å½•ä¸‹ï¼Œå’Œæ•°æ®é›†small_user.csvæ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/bigdatacase/dataset</span><br><span class="line">2.vim pre_deal.sh</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä½¿ç”¨vimç¼–è¾‘å™¨æ–°å»ºäº†ä¸€ä¸ªpre_deal.shè„šæœ¬æ–‡ä»¶ï¼Œè¯·åœ¨è¿™ä¸ªè„šæœ¬æ–‡ä»¶ä¸­åŠ å…¥ä¸‹é¢ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#ä¸‹é¢è®¾ç½®è¾“å…¥æ–‡ä»¶ï¼ŒæŠŠç”¨æˆ·æ‰§è¡Œpre_deal.shå‘½ä»¤æ—¶æä¾›çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºè¾“å…¥æ–‡ä»¶åç§°</span><br><span class="line">infile=$1</span><br><span class="line">#ä¸‹é¢è®¾ç½®è¾“å‡ºæ–‡ä»¶ï¼ŒæŠŠç”¨æˆ·æ‰§è¡Œpre_deal.shå‘½ä»¤æ—¶æä¾›çš„ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºè¾“å‡ºæ–‡ä»¶åç§°</span><br><span class="line">outfile=$2</span><br><span class="line">#æ³¨æ„ï¼ï¼æœ€åçš„$infile &gt; $outfileå¿…é¡»è·Ÿåœ¨&#125;â€™è¿™ä¸¤ä¸ªå­—ç¬¦çš„åé¢</span><br><span class="line">awk -F &quot;,&quot; &#x27;BEGIN&#123;</span><br><span class="line">        srand();</span><br><span class="line">        id=0;</span><br><span class="line">        Province[0]=&quot;å±±ä¸œ&quot;;Province[1]=&quot;å±±è¥¿&quot;;Province[2]=&quot;æ²³å—&quot;;Province[3]=&quot;æ²³åŒ—&quot;;Province[4]=&quot;é™•è¥¿&quot;;Province[5]=&quot;å†…è’™å¤&quot;;Province[6]=&quot;ä¸Šæµ·å¸‚&quot;;</span><br><span class="line">        Province[7]=&quot;åŒ—äº¬å¸‚&quot;;Province[8]=&quot;é‡åº†å¸‚&quot;;Province[9]=&quot;å¤©æ´¥å¸‚&quot;;Province[10]=&quot;ç¦å»º&quot;;Province[11]=&quot;å¹¿ä¸œ&quot;;Province[12]=&quot;å¹¿è¥¿&quot;;Province[13]=&quot;äº‘å—&quot;; </span><br><span class="line">        Province[14]=&quot;æµ™æ±Ÿ&quot;;Province[15]=&quot;è´µå·&quot;;Province[16]=&quot;æ–°ç–†&quot;;Province[17]=&quot;è¥¿è—&quot;;Province[18]=&quot;æ±Ÿè¥¿&quot;;Province[19]=&quot;æ¹–å—&quot;;Province[20]=&quot;æ¹–åŒ—&quot;;</span><br><span class="line">        Province[21]=&quot;é»‘é¾™æ±Ÿ&quot;;Province[22]=&quot;å‰æ—&quot;;Province[23]=&quot;è¾½å®&quot;; Province[24]=&quot;æ±Ÿè‹&quot;;Province[25]=&quot;ç”˜è‚ƒ&quot;;Province[26]=&quot;é’æµ·&quot;;Province[27]=&quot;å››å·&quot;;</span><br><span class="line">        Province[28]=&quot;å®‰å¾½&quot;; Province[29]=&quot;å®å¤&quot;;Province[30]=&quot;æµ·å—&quot;;Province[31]=&quot;é¦™æ¸¯&quot;;Province[32]=&quot;æ¾³é—¨&quot;;Province[33]=&quot;å°æ¹¾&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        id=id+1;</span><br><span class="line">        value=int(rand()*34);       </span><br><span class="line">        print id&quot;\t&quot;$1&quot;\t&quot;$2&quot;\t&quot;$3&quot;\t&quot;$5&quot;\t&quot;substr($6,1,10)&quot;\t&quot;Province[value]</span><br><span class="line">    &#125;&#x27; $infile &gt; $outfile</span><br></pre></td></tr></table></figure>
<p><img src="image-20230520211514736.png" alt="image-20230520211514736"></p>
<p>ä¸Šé¢çš„ä»£ç çš„åŸºæœ¬å½¢å¼æ˜¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F &quot;,&quot; &#x27;å¤„ç†é€»è¾‘&#x27; $infile &gt; $outfile</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨awkå¯ä»¥é€è¡Œè¯»å–è¾“å…¥æ–‡ä»¶ï¼Œå¹¶å¯¹é€è¡Œè¿›è¡Œç›¸åº”æ“ä½œã€‚å…¶ä¸­ï¼Œ-Få‚æ•°ç”¨äºæŒ‡å‡ºæ¯è¡Œè®°å½•çš„ä¸åŒå­—æ®µä¹‹é—´ç”¨ä»€ä¹ˆå­—ç¬¦è¿›è¡Œåˆ†å‰²ï¼Œè¿™é‡Œæ˜¯ç”¨é€—å·è¿›è¡Œåˆ†å‰²ã€‚å¤„ç†é€»è¾‘ä»£ç éœ€è¦ç”¨ä¸¤ä¸ªè‹±æ–‡å•å¼•å·å¼•èµ·æ¥ã€‚ $infileæ˜¯è¾“å…¥æ–‡ä»¶çš„åç§°ï¼Œæˆ‘ä»¬è¿™é‡Œä¼šè¾“å…¥raw_user.csvï¼Œ$outfileè¡¨ç¤ºå¤„ç†ç»“æŸåè¾“å‡ºçš„æ–‡ä»¶åç§°ï¼Œæˆ‘ä»¬åé¢ä¼šä½¿ç”¨user_table.txtä½œä¸ºè¾“å‡ºæ–‡ä»¶åç§°ã€‚</p>
<p>åœ¨ä¸Šé¢çš„pre_deal.shä»£ç çš„å¤„ç†é€»è¾‘éƒ¨åˆ†ï¼Œsrand()ç”¨äºç”Ÿæˆéšæœºæ•°çš„ç§å­ï¼Œidæ˜¯æˆ‘ä»¬ä¸ºæ•°æ®é›†æ–°å¢çš„ä¸€ä¸ªå­—æ®µï¼Œå®ƒæ˜¯ä¸€ä¸ªè‡ªå¢ç±»å‹ï¼Œæ¯æ¡è®°å½•å¢åŠ 1ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ¯æ¡è®°å½•å…·æœ‰å”¯ä¸€æ€§ã€‚æˆ‘ä»¬ä¼šä¸ºæ•°æ®é›†æ–°å¢ä¸€ä¸ªçœä»½å­—æ®µï¼Œç”¨æ¥è¿›è¡Œåé¢çš„æ•°æ®å¯è§†åŒ–åˆ†æï¼Œä¸ºäº†ç»™æ¯æ¡è®°å½•å¢åŠ ä¸€ä¸ªçœä»½å­—æ®µçš„å€¼ï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬é¦–å…ˆç”¨Province[]æ•°ç»„ç”¨æ¥ä¿å­˜å…¨å›½å„ä¸ªçœä»½ä¿¡æ¯ï¼Œç„¶åï¼Œåœ¨éå†æ•°æ®é›†raw_user.csvçš„æ—¶å€™ï¼Œæ¯å½“éå†åˆ°å…¶ä¸­ä¸€æ¡è®°å½•ï¼Œä½¿ç”¨value=int(rand()*34)è¯­å¥éšæœºç”Ÿæˆä¸€ä¸ª0-33çš„æ•´æ•°ï¼Œä½œä¸ºProvinceçœä»½å€¼ï¼Œç„¶åä»Province[]æ•°ç»„å½“ä¸­è·å–çœä»½åç§°ï¼Œå¢åŠ åˆ°è¯¥æ¡è®°å½•ä¸­ã€‚</p>
<p>substr($6,1,10)è¿™ä¸ªè¯­å¥æ˜¯ä¸ºäº†æˆªå–æ—¶é—´å­—æ®µtimeçš„å¹´æœˆæ—¥ï¼Œæ–¹ä¾¿åç»­å­˜å‚¨ä¸ºdateæ ¼å¼ã€‚awkæ¯æ¬¡éå†åˆ°ä¸€æ¡è®°å½•æ—¶ï¼Œæ¯æ¡è®°å½•åŒ…å«äº†6ä¸ªå­—æ®µï¼Œå…¶ä¸­ï¼Œç¬¬6ä¸ªå­—æ®µæ˜¯æ—¶é—´å­—æ®µï¼Œsubstr($6,1,10)è¯­å¥å°±è¡¨ç¤ºè·å–ç¬¬6ä¸ªå­—æ®µçš„å€¼ï¼Œæˆªå–å‰10ä¸ªå­—ç¬¦ï¼Œç¬¬6ä¸ªå­—æ®µæ˜¯ç±»ä¼¼â€2014-12-08 18â€³è¿™æ ·çš„å­—ç¬¦ä¸²ï¼ˆä¹Ÿå°±æ˜¯è¡¨ç¤º2014å¹´12æœˆ8æ—¥18æ—¶ï¼‰ï¼Œsubstr($6,1,10)æˆªå–åï¼Œå°±ä¸¢å¼ƒäº†å°æ—¶ï¼Œåªä¿ç•™äº†å¹´æœˆæ—¥ã€‚<br>å¦å¤–ï¼Œåœ¨print idâ€\tâ€$1â€³\tâ€$2â€³\tâ€$3â€³\tâ€$5â€³\tâ€substr($6,1,10)â€\tâ€Province[value]è¿™è¡Œè¯­å¥ä¸­ï¼Œæˆ‘ä»¬ä¸¢å¼ƒäº†æ¯è¡Œè®°å½•çš„ç¬¬4ä¸ªå­—æ®µï¼Œæ‰€ä»¥ï¼Œæ²¡æœ‰å‡ºç°$4ã€‚æˆ‘ä»¬ç”Ÿæˆåçš„æ–‡ä»¶æ˜¯â€œ\tâ€è¿›è¡Œåˆ†å‰²ï¼Œè¿™æ ·ï¼Œåç»­æˆ‘ä»¬å»æŸ¥çœ‹æ•°æ®çš„æ—¶å€™ï¼Œæ•ˆæœè®©äººçœ‹ä¸Šå»æ›´èˆ’æœï¼Œæ¯ä¸ªå­—æ®µåœ¨æ’ç‰ˆçš„æ—¶å€™ä¼šå¯¹é½æ˜¾ç¤ºï¼Œå¦‚æœç”¨é€—å·åˆ†éš”ï¼Œæ˜¾ç¤ºæ•ˆæœå°±æ¯”è¾ƒä¹±ã€‚</p>
<p>æœ€åï¼Œä¿å­˜pre_deal.shä»£ç æ–‡ä»¶ï¼Œé€€å‡ºvimç¼–è¾‘å™¨ã€‚<br>ä¸‹é¢å°±å¯ä»¥æ‰§è¡Œpre_deal.shè„šæœ¬æ–‡ä»¶ï¼Œæ¥å¯¹small_user.csvè¿›è¡Œæ•°æ®é¢„å¤„ç†ï¼Œå‘½ä»¤å¦‚ä¸‹:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/bigdatacase/dataset</span><br><span class="line">2.bash ./pre_deal.sh small_user.csv user_table.txt  </span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨headå‘½ä»¤æŸ¥çœ‹ç”Ÿæˆçš„user_table.txtï¼Œä¸è¦ç›´æ¥æ‰“å¼€ï¼Œæ–‡ä»¶è¿‡å¤§ï¼Œä¼šå‡ºé”™ï¼Œä¸‹é¢æŸ¥çœ‹å‰10è¡Œæ•°æ®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.head -10 user_table.txt</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>
<p><img src="image-20230520211813834.png" alt="image-20230520211813834"></p>
</li>
<li><p>å¯¼å…¥æ•°æ®åº“</p>
<p>ä¸‹é¢è¦æŠŠuser_table.txtä¸­çš„æ•°æ®æœ€ç»ˆå¯¼å…¥åˆ°æ•°æ®ä»“åº“Hiveä¸­ã€‚ä¸ºäº†å®Œæˆè¿™ä¸ªæ“ä½œï¼Œæˆ‘ä»¬ä¼šé¦–å…ˆæŠŠuser_table.txtä¸Šä¼ åˆ°åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸHDFSä¸­ï¼Œç„¶åï¼Œåœ¨Hiveä¸­åˆ›å»ºä¸€ä¸ªå¤–éƒ¨è¡¨ï¼Œå®Œæˆæ•°æ®çš„å¯¼å…¥ã€‚</p>
<p>a.å¯åŠ¨HDFS<br>HDFSæ˜¯Hadoopçš„æ ¸å¿ƒç»„ä»¶ï¼Œå› æ­¤ï¼Œéœ€è¦ä½¿ç”¨HDFSï¼Œå¿…é¡»å®‰è£…Hadoopã€‚è¿™é‡Œå‡è®¾ä½ å·²ç»å®‰è£…äº†Hadoopï¼Œæœ¬æ•™ç¨‹ä½¿ç”¨çš„æ˜¯Hadoop2.7.1ç‰ˆæœ¬ï¼Œå®‰è£…ç›®å½•æ˜¯â€œ/usr/local/hadoopâ€ã€‚</p>
<p>ä¸‹é¢ï¼Œè¯·ç™»å½•Linuxç³»ç»Ÿï¼Œæ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤å¯åŠ¨Hadoopï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hadoop</span><br><span class="line">2../sbin/start-all.sh</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œæ‰§è¡Œjpså‘½ä»¤çœ‹ä¸€ä¸‹å½“å‰è¿è¡Œçš„è¿›ç¨‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jps</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‡ºç°ä¸‹é¢è¿™äº›è¿›ç¨‹ï¼Œè¯´æ˜Hadoopå¯åŠ¨æˆåŠŸäº†:</p>
<p><img src="image-20230520212108328.png" alt="image-20230520212108328"></p>
<p>b.æŠŠuser_table.txtä¸Šä¼ åˆ°HDFSä¸­<br>ç°åœ¨ï¼Œæˆ‘ä»¬è¦æŠŠLinuxæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­çš„user_table.txtä¸Šä¼ åˆ°åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸHDFSä¸­ï¼Œå­˜æ”¾åœ¨HDFSä¸­çš„â€œ/bigdatacase/datasetâ€ç›®å½•ä¸‹ã€‚<br>é¦–å…ˆï¼Œè¯·æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œåœ¨HDFSçš„æ ¹ç›®å½•ä¸‹é¢åˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•bigdatacaseï¼Œå¹¶åœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå­ç›®å½•datasetï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hadoop</span><br><span class="line">2../bin/hdfs dfs -mkdir -p /bigdatacase/dataset</span><br></pre></td></tr></table></figure>
<p><img src="image-20230520212337614.png" alt="image-20230520212337614"></p>
<p>ç„¶åï¼ŒæŠŠLinuxæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­çš„user_table.txtä¸Šä¼ åˆ°åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸHDFSçš„â€œ/bigdatacase/datasetâ€ç›®å½•ä¸‹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hadoop</span><br><span class="line">2../bin/hdfs dfs -put /usr/local/bigdatacase/dataset/user_table.txt /bigdatacase/dataset</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹HDFSä¸­çš„user_table.txtçš„å‰10æ¡è®°å½•ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hadoop</span><br><span class="line">2../bin/hdfs dfs -cat /bigdatacase/dataset/user_table.txt | head -10</span><br></pre></td></tr></table></figure>
<p><img src="image-20230520212430962.png" alt="image-20230520212430962"></p>
<p>c.åœ¨Hiveä¸Šåˆ›å»ºæ•°æ®åº“<br>å…³äºä»€ä¹ˆæ˜¯æ•°æ®ä»“åº“Hiveï¼ŸHiveçš„è¿è¡ŒåŸºæœ¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å¼€å±•Hiveç®€å•ç¼–ç¨‹å®è·µï¼Ÿ<br>æœ¬æ¡ˆä¾‹æ•™ç¨‹éœ€è¦å®‰è£…æ•°æ®ä»“åº“Hiveï¼Œè¿™é‡Œå‡è®¾ä½ å·²ç»å®Œæˆäº†Hiveçš„å®‰è£…ï¼Œå¹¶ä¸”ä½¿ç”¨MySQLæ•°æ®åº“ä¿å­˜Hiveçš„å…ƒæ•°æ®ã€‚æœ¬æ•™ç¨‹å®‰è£…çš„æ˜¯Hive2.1.0ç‰ˆæœ¬ï¼Œå®‰è£…ç›®å½•æ˜¯â€œ/usr/local/hiveâ€ã€‚<br>ä¸‹é¢ï¼Œè¯·åœ¨Linuxç³»ç»Ÿä¸­ï¼Œå†æ–°å»ºä¸€ä¸ªç»ˆç«¯ï¼ˆå¯ä»¥åœ¨åˆšæ‰å·²ç»å»ºå¥½çš„ç»ˆç«¯ç•Œé¢çš„å·¦ä¸Šè§’ï¼Œç‚¹å‡»â€œç»ˆç«¯â€èœå•ï¼Œåœ¨å¼¹å‡ºçš„å­èœå•ä¸­é€‰æ‹©â€œæ–°å»ºç»ˆç«¯â€ï¼‰ã€‚å› ä¸ºéœ€è¦å€ŸåŠ©äºMySQLä¿å­˜Hiveçš„å…ƒæ•°æ®ï¼Œæ‰€ä»¥ï¼Œè¯·é¦–å…ˆå¯åŠ¨MySQLæ•°æ®åº“ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.service mysql start  //å¯ä»¥åœ¨Linuxçš„ä»»ä½•ç›®å½•ä¸‹æ‰§è¡Œè¯¥å‘½ä»¤</span><br></pre></td></tr></table></figure>
<p>ç”±äºHiveæ˜¯åŸºäºHadoopçš„æ•°æ®ä»“åº“ï¼Œä½¿ç”¨HiveQLè¯­è¨€æ’°å†™çš„æŸ¥è¯¢è¯­å¥ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«Hiveè‡ªåŠ¨è§£ææˆMapReduceä»»åŠ¡ç”±Hadoopå»å…·ä½“æ‰§è¡Œï¼Œå› æ­¤ï¼Œéœ€è¦å¯åŠ¨Hadoopï¼Œç„¶åå†å¯åŠ¨Hiveã€‚ç”±äºå‰é¢æˆ‘ä»¬å·²ç»å¯åŠ¨äº†Hadoopï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œä¸éœ€è¦å†æ¬¡å¯åŠ¨Hadoopã€‚ä¸‹é¢ï¼Œåœ¨è¿™ä¸ªæ–°çš„ç»ˆç«¯ä¸­æ‰§è¡Œä¸‹é¢å‘½ä»¤è¿›å…¥Hiveï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hive</span><br><span class="line">2../bin/hive   //å¯åŠ¨Hive</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨æˆåŠŸä»¥åï¼Œå°±è¿›å…¥äº†â€œhive&gt;â€å‘½ä»¤æç¤ºç¬¦çŠ¶æ€ï¼Œå¯ä»¥è¾“å…¥ç±»ä¼¼SQLè¯­å¥çš„HiveQLè¯­å¥ã€‚</p>
<p><img src="image-20230520212634858.png" alt="image-20230520212634858"></p>
<p><img src="image-20230520212650120.png" alt="image-20230520212650120"></p>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬è¦åœ¨Hiveä¸­åˆ›å»ºä¸€ä¸ªæ•°æ®åº“dblabï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.hive&gt;  create database dblab;</span><br><span class="line">2.hive&gt;  use dblab;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230520212714795.png" alt="image-20230520212714795"></p>
<p>d.åˆ›å»ºå¤–éƒ¨è¡¨<br>å…³äºæ•°æ®ä»“åº“Hiveçš„å†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨çš„åŒºåˆ«ï¼Œæœ¬æ•™ç¨‹é‡‡ç”¨å¤–éƒ¨è¡¨æ–¹å¼ã€‚<br>è¿™é‡Œæˆ‘ä»¬è¦åœ¨æ•°æ®åº“dblabä¸­åˆ›å»ºä¸€ä¸ªå¤–éƒ¨è¡¨bigdata_userï¼Œå®ƒåŒ…å«å­—æ®µï¼ˆid, uid, item_id, behavior_type, item_category, date, provinceï¼‰ï¼Œè¯·åœ¨hiveå‘½ä»¤æç¤ºç¬¦ä¸‹è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt;  CREATE EXTERNAL TABLE dblab.bigdata_user(id INT,uid STRING,item_id STRING,behavior_type INT,item_category STRING,visit_date DATE,province STRING) COMMENT &#x27;Welcome to xmu dblab!&#x27; ROW FORMAT DELIMITED FIELDS TERMINATED BY &#x27;\t&#x27; STORED AS TEXTFILE LOCATION &#x27;/bigdatacase/dataset&#x27;;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230520212804298.png" alt="image-20230520212804298"> <em>**\</em>e.æŸ¥è¯¢æ•°æ®<br>ä¸Šé¢å·²ç»æˆåŠŸæŠŠHDFSä¸­çš„â€œ/bigdatacase/datasetâ€ç›®å½•ä¸‹çš„æ•°æ®åŠ è½½åˆ°äº†æ•°æ®ä»“åº“Hiveä¸­ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤æŸ¥è¯¢ä¸€ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.hive&gt;  select * from bigdata_user limit 10;</span><br><span class="line">2.hive&gt;  select behavior_type from bigdata_user limit 10;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230520212915936.png" alt="image-20230520212915936"></p>
</li>
</ol>
<h3 id="äºŒ-Hiveæ•°æ®åˆ†æ"><a href="#äºŒ-Hiveæ•°æ®åˆ†æ" class="headerlink" title="äºŒ. Hiveæ•°æ®åˆ†æ"></a>äºŒ. Hiveæ•°æ®åˆ†æ</h3><h4 id="1-æ“ä½œHive"><a href="#1-æ“ä½œHive" class="headerlink" title="1.æ“ä½œHive"></a>1.æ“ä½œHive</h4><p>è¯·ç™»å½•Linuxç³»ç»Ÿï¼ˆæœ¬æ•™ç¨‹ç»Ÿä¸€é‡‡ç”¨hadoopç”¨æˆ·åç™»å½•ç³»ç»Ÿï¼‰ï¼Œç„¶åï¼Œæ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼ˆå¯ä»¥æŒ‰å¿«æ·é”®Ctrl+Alt+Tï¼‰ã€‚<br>æœ¬æ•™ç¨‹ä¸­ï¼ŒHadoopçš„å®‰è£…ç›®å½•æ˜¯â€œ/usr/local/hadoopâ€ï¼ŒHiveçš„å®‰è£…ç›®å½•æ˜¯â€œ/usr/local/hiveâ€ã€‚<br>å› ä¸ºéœ€è¦å€ŸåŠ©äºMySQLä¿å­˜Hiveçš„å…ƒæ•°æ®ï¼Œæ‰€ä»¥ï¼Œè¯·é¦–å…ˆå¯åŠ¨MySQLæ•°æ®åº“ï¼Œè¯·åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä¸‹é¢å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql start  //å¯ä»¥åœ¨Linuxçš„ä»»ä½•ç›®å½•ä¸‹æ‰§è¡Œè¯¥å‘½ä»¤</span><br></pre></td></tr></table></figure>
<p>ç”±äºHiveæ˜¯åŸºäºHadoopçš„æ•°æ®ä»“åº“ï¼Œä½¿ç”¨HiveQLè¯­è¨€æ’°å†™çš„æŸ¥è¯¢è¯­å¥ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«Hiveè‡ªåŠ¨è§£ææˆMapReduceä»»åŠ¡ç”±Hadoopå»å…·ä½“æ‰§è¡Œï¼Œå› æ­¤ï¼Œéœ€è¦å¯åŠ¨Hadoopï¼Œç„¶åå†å¯åŠ¨Hiveã€‚</p>
<p>è¯·æ‰§è¡Œä¸‹é¢å‘½ä»¤å¯åŠ¨Hadoopï¼ˆå¦‚æœä½ å·²ç»å¯åŠ¨äº†Hadoopå°±ä¸ç”¨å†æ¬¡å¯åŠ¨äº†ï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hadoop</span><br><span class="line">2../sbin/start-all.sh</span><br><span class="line">3.jps          #æŸ¥çœ‹ä¸€ä¸‹è¿›ç¨‹</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‡ºç°ä¸‹é¢è¿™äº›è¿›ç¨‹ï¼Œè¯´æ˜Hadoopå¯åŠ¨æˆåŠŸäº†ï¼š</p>
<p><img src="image-20230521132143873.png" alt="image-20230521132143873"></p>
<p>ä¸‹é¢ï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢å‘½ä»¤å¯åŠ¨è¿›å…¥Hiveï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hive</span><br><span class="line">2../bin/hive   //å¯åŠ¨Hive</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä¸Šè¿°è¿‡ç¨‹ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†MySQLã€Hadoopå’ŒHiveä¸‰è€…çš„å¯åŠ¨ã€‚<br>å¯åŠ¨æˆåŠŸä»¥åï¼Œå°±è¿›å…¥äº†â€œhive&gt;â€å‘½ä»¤æç¤ºç¬¦çŠ¶æ€ï¼Œå¯ä»¥è¾“å…¥ç±»ä¼¼SQLè¯­å¥çš„HiveQLè¯­å¥ã€‚</p>
<p><img src="image-20230521132230389.png" alt="image-20230521132230389"><img src="image-20230521132258269.png" alt="image-20230521132258269"></p>
<p>ç„¶åï¼Œåœ¨â€œhive&gt;â€å‘½ä»¤æç¤ºç¬¦çŠ¶æ€ä¸‹æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.hive&gt; use dblab; //ä½¿ç”¨dblabæ•°æ®åº“</span><br><span class="line">2.hive&gt; show tables; //æ˜¾ç¤ºæ•°æ®åº“ä¸­æ‰€æœ‰è¡¨ã€‚</span><br><span class="line">3.hive&gt; show create table bigdata_user; //æŸ¥çœ‹bigdata_userè¡¨çš„å„ç§å±æ€§ï¼›</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="image-20230521132408219.png" alt="image-20230521132408219"></p>
<p>å¯ä»¥æ‰§è¡Œä¸‹é¢å‘½ä»¤æŸ¥çœ‹è¡¨çš„ç®€å•ç»“æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.hive&gt; desc bigdata_user;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="image-20230521132431320.png" alt="image-20230521132431320"></p>
<h4 id="2-ç®€å•æŸ¥è¯¢åˆ†æ"><a href="#2-ç®€å•æŸ¥è¯¢åˆ†æ" class="headerlink" title="2.ç®€å•æŸ¥è¯¢åˆ†æ"></a>2.ç®€å•æŸ¥è¯¢åˆ†æ</h4><p>å…ˆæµ‹è¯•ä¸€ä¸‹ç®€å•çš„æŒ‡ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.hive&gt; select behavior_type from bigdata_user limit 10;//æŸ¥çœ‹å‰10ä½ç”¨æˆ·å¯¹å•†å“çš„è¡Œä¸º</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="image-20230521132454930.png" alt="image-20230521132454930"></p>
<p>å¦‚æœè¦æŸ¥å‡ºæ¯ä½ç”¨æˆ·è´­ä¹°å•†å“æ—¶çš„å¤šç§ä¿¡æ¯ï¼Œè¾“å‡ºè¯­å¥æ ¼å¼ä¸º select åˆ—1ï¼Œåˆ—2ï¼Œâ€¦.ï¼Œåˆ—n from è¡¨åï¼›<br>æ¯”å¦‚æˆ‘ä»¬ç°åœ¨æŸ¥è¯¢å‰20ä½ç”¨æˆ·è´­ä¹°å•†å“æ—¶çš„æ—¶é—´å’Œå•†å“çš„ç§ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.hive&gt; select visit_date,item_category from bigdata_user limit 20;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="image-20230521132521517.png" alt="image-20230521132521517"></p>
<p>æœ‰æ—¶æˆ‘ä»¬åœ¨è¡¨ä¸­æŸ¥è¯¢å¯ä»¥åˆ©ç”¨åµŒå¥—è¯­å¥ï¼Œå¦‚æœåˆ—åå¤ªå¤æ‚å¯ä»¥è®¾ç½®è¯¥åˆ—çš„åˆ«åï¼Œä»¥ç®€åŒ–æˆ‘ä»¬æ“ä½œçš„éš¾åº¦ï¼Œä»¥ä¸‹æˆ‘ä»¬å¯ä»¥ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.hive&gt; select e.bh, e.it  from (select behavior_type as bh, item_category as it from bigdata_user) as e  limit 20;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="image-20230521132551215.png" alt="image-20230521132551215"></p>
<p>è¿™é‡Œç®€å•çš„åšä¸ªè®²è§£ï¼Œbehavior_type as bh ,item_category as itå°±æ˜¯æŠŠbehavior_type è®¾ç½®åˆ«å bh ,item_category è®¾ç½®åˆ«å itï¼ŒFROMçš„æ‹¬å·é‡Œçš„å†…å®¹æˆ‘ä»¬ä¹Ÿè®¾ç½®äº†åˆ«åeï¼Œè¿™æ ·è°ƒç”¨æ—¶ç”¨e.bh,e.it,å¯ä»¥ç®€åŒ–ä»£ç ã€‚</p>
<h4 id="3-æŸ¥è¯¢æ¡æ•°ç»Ÿè®¡åˆ†æ"><a href="#3-æŸ¥è¯¢æ¡æ•°ç»Ÿè®¡åˆ†æ" class="headerlink" title="3.æŸ¥è¯¢æ¡æ•°ç»Ÿè®¡åˆ†æ"></a>3.æŸ¥è¯¢æ¡æ•°ç»Ÿè®¡åˆ†æ</h4><p>ç»è¿‡ç®€å•çš„æŸ¥è¯¢åæˆ‘ä»¬åŒæ ·ä¹Ÿå¯ä»¥åœ¨selectååŠ å…¥æ›´å¤šçš„æ¡ä»¶å¯¹è¡¨è¿›è¡ŒæŸ¥è¯¢,ä¸‹é¢å¯ä»¥ç”¨å‡½æ•°æ¥æŸ¥æ‰¾æˆ‘ä»¬æƒ³è¦çš„å†…å®¹ã€‚</p>
<ol>
<li><p>ç”¨èšåˆå‡½æ•°count()è®¡ç®—å‡ºè¡¨å†…æœ‰å¤šå°‘æ¡è¡Œæ•°æ®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select count(*) from bigdata_user;//ç”¨èšåˆå‡½æ•°count()è®¡ç®—å‡ºè¡¨å†…æœ‰å¤šå°‘æ¡è¡Œæ•°æ® </span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¾—å‡ºçš„ç»“æœä¸ºOKä¸‹çš„é‚£ä¸ªæ•°å­—300000ï¼ˆå› ä¸ºæˆ‘ä»¬çš„small_user.csvä¸­åŒ…å«äº†300000æ¡è®°å½•ï¼Œå¯¼å…¥åˆ°Hiveä¸­ï¼‰ã€‚</p>
<p><img src="image-20230521132650584.png" alt="image-20230521132650584"></p>
</li>
<li><p>åœ¨å‡½æ•°å†…éƒ¨åŠ ä¸Šdistinctï¼ŒæŸ¥å‡ºuidä¸é‡å¤çš„æ•°æ®æœ‰å¤šå°‘æ¡</p>
<p>ä¸‹é¢ç»§ç»­æ‰§è¡Œæ“ä½œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select count(distinct uid) from bigdata_user;//åœ¨å‡½æ•°å†…éƒ¨åŠ ä¸Šdistinctï¼ŒæŸ¥å‡ºuidä¸é‡å¤çš„æ•°æ®æœ‰å¤šå°‘æ¡</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="image-20230521132722267.png" alt="image-20230521132722267"></p>
</li>
<li><p>æŸ¥è¯¢ä¸é‡å¤çš„æ•°æ®æœ‰å¤šå°‘æ¡(ä¸ºäº†æ’é™¤å®¢æˆ·åˆ·å•æƒ…å†µ) </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt;select count(*) from (select uid,item_id,behavior_type,item_category,visit_date,province from bigdata_user group by uid,item_id,behavior_type,item_category,visit_date,province having count(*)=1)a;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="image-20230521132815436.png" alt="image-20230521132815436"></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œæ’é™¤æ‰é‡å¤ä¿¡æ¯ä»¥åï¼Œåªæœ‰284444æ¡è®°å½•ã€‚<br>æ³¨æ„ï¼šåµŒå¥—è¯­å¥æœ€å¥½å–åˆ«åï¼Œå°±æ˜¯ä¸Šé¢çš„aï¼Œå¦åˆ™å¾ˆå®¹æ˜“å‡ºç°å¦‚ä¸‹é”™è¯¯.</p>
<p><img src="image-20230521131151504.png" alt="image-20230521131151504"></p>
</li>
</ol>
<h4 id="4-å…³é”®å­—æ¡ä»¶æŸ¥è¯¢åˆ†æ"><a href="#4-å…³é”®å­—æ¡ä»¶æŸ¥è¯¢åˆ†æ" class="headerlink" title="4.å…³é”®å­—æ¡ä»¶æŸ¥è¯¢åˆ†æ"></a>4.å…³é”®å­—æ¡ä»¶æŸ¥è¯¢åˆ†æ</h4><ol>
<li><p>ä»¥å…³é”®å­—çš„å­˜åœ¨åŒºé—´ä¸ºæ¡ä»¶çš„æŸ¥è¯¢<br>ä½¿ç”¨whereå¯ä»¥ç¼©å°æŸ¥è¯¢åˆ†æçš„èŒƒå›´å’Œç²¾ç¡®åº¦ï¼Œä¸‹é¢ç”¨å®ä¾‹æ¥æµ‹è¯•ä¸€ä¸‹ã€‚<br>(1)æŸ¥è¯¢2014å¹´12æœˆ10æ—¥åˆ°2014å¹´12æœˆ13æ—¥æœ‰å¤šå°‘äººæµè§ˆäº†å•†å“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt;select count(*) from bigdata_user where behavior_type=&#x27;1&#x27; and visit_date&lt;&#x27;2014-12-13&#x27; and visit_date&gt;&#x27;2014-12-10&#x27;;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="image-20230521132933625.png" alt="image-20230521132933625"></p>
<p>ï¼ˆ2ï¼‰ä»¥æœˆçš„ç¬¬nå¤©ä¸ºç»Ÿè®¡å•ä½ï¼Œä¾æ¬¡æ˜¾ç¤ºç¬¬nå¤©ç½‘ç«™å–å‡ºå»çš„å•†å“çš„ä¸ªæ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select count(distinct uid), day(visit_date) from bigdata_user where behavior_type=&#x27;4&#x27; group by day(visit_date);</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="image-20230521133024102.png" alt="image-20230521133024102"><img src="image-20230521133101192.png" alt="image-20230521133101192"></p>
</li>
<li><p>å…³é”®å­—èµ‹äºˆç»™å®šå€¼ä¸ºæ¡ä»¶ï¼Œå¯¹å…¶ä»–æ•°æ®è¿›è¡Œåˆ†æ</p>
<p>å–ç»™å®šæ—¶é—´å’Œç»™å®šåœ°ç‚¹ï¼Œæ±‚å½“å¤©å‘å‡ºåˆ°è¯¥åœ°ç‚¹çš„è´§ç‰©çš„æ•°é‡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.hive&gt; select count(*) from bigdata_user where province=&#x27;æ±Ÿè¥¿&#x27; and visit_date=&#x27;2014-12-12&#x27; and behavior_type=&#x27;4&#x27;;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="image-20230521133133244.png" alt="image-20230521133133244"></p>
</li>
</ol>
<h4 id="5-æ ¹æ®ç”¨æˆ·è¡Œä¸ºåˆ†æ"><a href="#5-æ ¹æ®ç”¨æˆ·è¡Œä¸ºåˆ†æ" class="headerlink" title="5.æ ¹æ®ç”¨æˆ·è¡Œä¸ºåˆ†æ"></a>5.æ ¹æ®ç”¨æˆ·è¡Œä¸ºåˆ†æ</h4><ol>
<li><p>æŸ¥è¯¢ä¸€ä»¶å•†å“åœ¨æŸå¤©çš„è´­ä¹°æ¯”ä¾‹æˆ–æµè§ˆæ¯”ä¾‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select count(*) from bigdata_user where visit_date=&#x27;2014-12-11&#x27;and behavior_type=&#x27;4&#x27;;//æŸ¥è¯¢æœ‰å¤šå°‘ç”¨æˆ·åœ¨2014-12-11è´­ä¹°äº†å•†å“</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select count(*) from bigdata_user where visit_date =&#x27;2014-12-11&#x27;;//æŸ¥è¯¢æœ‰å¤šå°‘ç”¨æˆ·åœ¨2014-12-11ç‚¹å‡»äº†è¯¥åº—</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®ä¸Šé¢è¯­å¥å¾—åˆ°è´­ä¹°æ•°é‡å’Œç‚¹å‡»æ•°é‡ï¼Œä¸¤ä¸ªæ•°ç›¸é™¤å³å¯å¾—å‡ºå½“å¤©è¯¥å•†å“çš„è´­ä¹°ç‡ã€‚</p>
<p><img src="image-20230521133222377.png" alt="image-20230521133222377"></p>
</li>
<li><p>æŸ¥è¯¢æŸä¸ªç”¨æˆ·åœ¨æŸä¸€å¤©ç‚¹å‡»ç½‘ç«™å è¯¥å¤©æ‰€æœ‰ç‚¹å‡»è¡Œä¸ºçš„æ¯”ä¾‹ï¼ˆç‚¹å‡»è¡Œä¸ºåŒ…æ‹¬æµè§ˆï¼ŒåŠ å…¥è´­ç‰©è½¦ï¼Œæ”¶è—ï¼Œè´­ä¹°ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.hive&gt; select count(*) from bigdata_user where uid=10001082 and visit_date=&#x27;2014-12-12&#x27;;//æŸ¥è¯¢ç”¨æˆ·10001082åœ¨2014-12-12ç‚¹å‡»ç½‘ç«™çš„æ¬¡æ•°</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.hive&gt; select count(*) from bigdata_user where visit_date=&#x27;2014-12-12&#x27;;//æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·åœ¨è¿™ä¸€å¤©ç‚¹å‡»è¯¥ç½‘ç«™çš„æ¬¡æ•°</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä¸¤æ¡è¯­å¥çš„ç»“æœç›¸é™¤ï¼Œå°±å¾—åˆ°äº†è¦è¦æ±‚çš„æ¯”ä¾‹ã€‚</p>
<p><img src="image-20230521133330744.png" alt="image-20230521133330744"></p>
</li>
<li><p>ç»™å®šè´­ä¹°å•†å“çš„æ•°é‡èŒƒå›´ï¼ŒæŸ¥è¯¢æŸä¸€å¤©åœ¨è¯¥ç½‘ç«™çš„è´­ä¹°è¯¥æ•°é‡å•†å“çš„ç”¨æˆ·id</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select uid from bigdata_user where behavior_type=&#x27;4&#x27; and visit_date=&#x27;2014-12-12&#x27; group by uid having count(behavior_type=&#x27;4&#x27;)&gt;5;//æŸ¥è¯¢æŸä¸€å¤©åœ¨è¯¥ç½‘ç«™è´­ä¹°å•†å“è¶…è¿‡5æ¬¡çš„ç”¨æˆ·id</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="image-20230521133404842.png" alt="image-20230521133404842"></p>
<h4 id="6-ç”¨æˆ·å®æ—¶æŸ¥è¯¢åˆ†æ"><a href="#6-ç”¨æˆ·å®æ—¶æŸ¥è¯¢åˆ†æ" class="headerlink" title="6.ç”¨æˆ·å®æ—¶æŸ¥è¯¢åˆ†æ"></a>6.ç”¨æˆ·å®æ—¶æŸ¥è¯¢åˆ†æ</h4><p>æŸä¸ªåœ°åŒºçš„ç”¨æˆ·å½“å¤©æµè§ˆç½‘ç«™çš„æ¬¡æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.hive&gt; create table scan(province STRING,scan INT) COMMENT &#x27;This is the search of bigdataday&#x27; ROW FORMAT DELIMITED FIELDS TERMINATED BY &#x27;\t&#x27; STORED AS TEXTFILE;//åˆ›å»ºæ–°çš„æ•°æ®è¡¨è¿›è¡Œå­˜å‚¨</span><br><span class="line">2.hive&gt; insert overwrite table scan select province,count(behavior_type) from bigdata_user where behavior_type=&#x27;1&#x27; group by province;//å¯¼å…¥æ•°æ®</span><br><span class="line">3.hive&gt; select * from scan;//æ˜¾ç¤ºç»“æœ</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="image-20230521133528636.png" alt="image-20230521133528636"><img src="image-20230521133546198.png" alt="image-20230521133546198"></p>
<h3 id="ä¸‰-Hive-MYSQL-HBaseæ•°æ®äº’å¯¼"><a href="#ä¸‰-Hive-MYSQL-HBaseæ•°æ®äº’å¯¼" class="headerlink" title="ä¸‰.Hive,MYSQL,HBaseæ•°æ®äº’å¯¼"></a>ä¸‰.Hive,MYSQL,HBaseæ•°æ®äº’å¯¼</h3><h4 id="1-Hiveå‡†å¤‡å·¥ä½œ"><a href="#1-Hiveå‡†å¤‡å·¥ä½œ" class="headerlink" title="1.Hiveå‡†å¤‡å·¥ä½œ"></a>1.Hiveå‡†å¤‡å·¥ä½œ</h4><p>æœ¬æ•™ç¨‹éœ€è¦å®‰è£…Hiveã€MySQLã€HBaseå’ŒSqoopã€‚åœ¨å‰é¢çš„ç¬¬ä¸€ä¸ªæ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬åœ¨å®‰è£…Hiveçš„æ—¶å€™å°±å·²ç»ä¸€èµ·å®‰è£…äº†MySQLï¼ˆå› ä¸ºæˆ‘ä»¬é‡‡ç”¨MySQLæ¥å­˜å‚¨Hiveçš„å…ƒæ•°æ®ï¼‰ï¼Œæ‰€ä»¥ï¼Œç°åœ¨ä½ åªéœ€è¦å†å®‰è£…HBaseå’ŒSqoopã€‚<br>ï¼ˆ1ï¼‰å®ŒæˆHBaseçš„å®‰è£…ã€‚æœ¬æ•™ç¨‹æŠŠHBaseå®‰è£…åœ¨äº†â€œ/usr/local/hbaseâ€ç›®å½•ä¸‹ï¼Œé‡‡ç”¨ä¼ªåˆ†å¸ƒå¼é…ç½®ï¼Œä¹Ÿå°±æ˜¯HBaseä¼šä½¿ç”¨HDFSæ¥å­˜å‚¨æ•°æ®ã€‚<br>ï¼ˆ2ï¼‰å®ŒæˆSqoopçš„å®‰è£…ã€‚æœ¬æ•™ç¨‹ä¸‹è½½çš„æ˜¯sqoop-1.4.6.bin__hadoop-2.0.4-alpha.tar.gzï¼Œå®‰è£…ç›®å½•æ˜¯â€œ/usr/local/sqoopâ€ã€‚è™½ç„¶è¿™ä¸ªsqoopæ˜¯ä¸ºhadoop2.0.4ç‰ˆæœ¬å¼€å‘çš„ï¼Œæœ¬æ•™ç¨‹Hadoopç‰ˆæœ¬æ˜¯2.7.1ï¼Œä½†æ˜¯ï¼Œä¾ç„¶å¯ä»¥é¡ºåˆ©ä½¿ç”¨ã€‚</p>
<h4 id="2-Hiveé¢„æ“ä½œ"><a href="#2-Hiveé¢„æ“ä½œ" class="headerlink" title="2.Hiveé¢„æ“ä½œ"></a>2.Hiveé¢„æ“ä½œ</h4><p>è¯·ç™»å½•Linuxç³»ç»Ÿï¼ˆæœ¬æ•™ç¨‹ç»Ÿä¸€é‡‡ç”¨hadoopç”¨æˆ·åç™»å½•ç³»ç»Ÿï¼‰ï¼Œç„¶åï¼Œæ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼ˆå¯ä»¥æŒ‰å¿«æ·é”®Ctrl+Alt+Tï¼‰ã€‚<br>æœ¬æ•™ç¨‹ä¸­ï¼ŒHadoopçš„å®‰è£…ç›®å½•æ˜¯â€œ/usr/local/hadoopâ€ï¼ŒHiveçš„å®‰è£…ç›®å½•æ˜¯â€œ/usr/local/hiveâ€ã€‚<br>å› ä¸ºéœ€è¦å€ŸåŠ©äºMySQLä¿å­˜Hiveçš„å…ƒæ•°æ®ï¼Œæ‰€ä»¥ï¼Œè¯·é¦–å…ˆå¯åŠ¨MySQLæ•°æ®åº“ï¼Œè¯·åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä¸‹é¢å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql start  //å¯ä»¥åœ¨Linuxçš„ä»»ä½•ç›®å½•ä¸‹æ‰§è¡Œè¯¥å‘½ä»¤</span><br></pre></td></tr></table></figure>
<p>ç”±äºHiveæ˜¯åŸºäºHadoopçš„æ•°æ®ä»“åº“ï¼Œä½¿ç”¨HiveQLè¯­è¨€æ’°å†™çš„æŸ¥è¯¢è¯­å¥ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«Hiveè‡ªåŠ¨è§£ææˆMapReduceä»»åŠ¡ç”±Hadoopå»å…·ä½“æ‰§è¡Œï¼Œå› æ­¤ï¼Œéœ€è¦å¯åŠ¨Hadoopï¼Œç„¶åå†å¯åŠ¨Hiveã€‚</p>
<p>è¯·æ‰§è¡Œä¸‹é¢å‘½ä»¤å¯åŠ¨Hadoopï¼ˆå¦‚æœä½ å·²ç»å¯åŠ¨äº†Hadoopå°±ä¸ç”¨å†æ¬¡å¯åŠ¨äº†ï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hadoop</span><br><span class="line">2../sbin/start-all.sh</span><br><span class="line">3.jps          #æŸ¥çœ‹ä¸€ä¸‹è¿›ç¨‹</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‡ºç°ä¸‹é¢è¿™äº›è¿›ç¨‹ï¼Œè¯´æ˜Hadoopå¯åŠ¨æˆåŠŸäº†ï¼š</p>
<p><img src="image-20230521132143873.png" alt="image-20230521132143873"></p>
<p>ä¸‹é¢ï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢å‘½ä»¤å¯åŠ¨è¿›å…¥Hiveï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hive</span><br><span class="line">2../bin/hive   //å¯åŠ¨Hive</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä¸Šè¿°è¿‡ç¨‹ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†MySQLã€Hadoopå’ŒHiveä¸‰è€…çš„å¯åŠ¨ã€‚<br>å¯åŠ¨æˆåŠŸä»¥åï¼Œå°±è¿›å…¥äº†â€œhive&gt;â€å‘½ä»¤æç¤ºç¬¦çŠ¶æ€ï¼Œå¯ä»¥è¾“å…¥ç±»ä¼¼SQLè¯­å¥çš„HiveQLè¯­å¥ã€‚</p>
<p><img src="image-20230521132230389.png" alt="image-20230521132230389"><img src="image-20230521132258269.png" alt="image-20230521132258269"></p>
<p>ç„¶åï¼Œåœ¨â€œhive&gt;â€å‘½ä»¤æç¤ºç¬¦çŠ¶æ€ä¸‹æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š</p>
<ol>
<li><p>åˆ›å»ºä¸´æ—¶è¡¨user_action</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; create table dblab.user_action(id STRING,uid STRING, item_id STRING, behavior_type STRING, item_category STRING, visit_date DATE, province STRING) COMMENT &#x27;Welcome to XMU dblab! &#x27; ROW FORMAT DELIMITED FIELDS TERMINATED BY &#x27;\t&#x27; STORED AS TEXTFILE;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå‘½ä»¤æ‰§è¡Œå®Œä»¥åï¼ŒHiveä¼šè‡ªåŠ¨åœ¨HDFSæ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºå¯¹åº”çš„æ•°æ®æ–‡ä»¶â€œ/user/hive/warehouse/dblab.db/user_actionâ€ã€‚<br>æˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹ï¼Œç¡®è®¤è¿™ä¸ªæ•°æ®æ–‡ä»¶åœ¨HDFSä¸­ç¡®å®è¢«åˆ›å»ºäº†ï¼Œè¯·åœ¨æ–°å»ºçš„ç»ˆç«¯ä¸­æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hadoop</span><br><span class="line">2../bin/hdfs dfs -ls /user/hive/warehouse/dblab.db/user_action</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š</p>
<p><img src="image-20230521141255528.png" alt="image-20230521141255528"><img src="image-20230521143911691.png" alt="image-20230521143911691"></p>
<p>è¿™è¯´æ˜ï¼Œè¿™ä¸ªæ•°æ®æ–‡ä»¶åœ¨HDFSä¸­ç¡®å®è¢«åˆ›å»ºäº†ã€‚æ³¨æ„ï¼Œè¿™ä¸ªHDFSä¸­çš„æ•°æ®æ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬åé¢çš„â€œä½¿ç”¨HBase Java APIæŠŠæ•°æ®ä»æœ¬åœ°å¯¼å…¥åˆ°HBaseä¸­â€æ“ä½œä¸­ä¼šä½¿ç”¨åˆ°ã€‚</p>
<ol>
<li><p>å°†bigdata_userè¡¨ä¸­çš„æ•°æ®æ’å…¥åˆ°user_action(æ‰§è¡Œæ—¶é—´ï¼š10ç§’å·¦å³)<br>åœ¨ç¬¬äºŒä¸ªæ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬å·²ç»åœ¨Hiveä¸­çš„dblabæ•°æ®åº“ä¸­åˆ›å»ºäº†ä¸€ä¸ªå¤–éƒ¨è¡¨bigdata_userã€‚ä¸‹é¢æŠŠdblab.bigdata_useræ•°æ®æ’å…¥åˆ°dblab.user_actionè¡¨ä¸­ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.hive&gt; INSERT OVERWRITE TABLE dblab.user_action select * from dblab.bigdata_user;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230521144334234.png" alt="image-20230521144334234"></p>
<p>è¯·æ‰§è¡Œä¸‹é¢å‘½ä»¤æŸ¥è¯¢ä¸Šé¢çš„æ’å…¥å‘½ä»¤æ˜¯å¦æˆåŠŸæ‰§è¡Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.hive&gt;select * from user_action limit 10;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230521145123253.png" alt="image-20230521145123253"></p>
</li>
</ol>
</li>
</ol>
<h4 id="3-ä½¿ç”¨Sqoopå°†æ•°æ®ä»Hiveå¯¼å…¥MYSQL"><a href="#3-ä½¿ç”¨Sqoopå°†æ•°æ®ä»Hiveå¯¼å…¥MYSQL" class="headerlink" title="3.ä½¿ç”¨Sqoopå°†æ•°æ®ä»Hiveå¯¼å…¥MYSQL"></a>3.ä½¿ç”¨Sqoopå°†æ•°æ®ä»Hiveå¯¼å…¥MYSQL</h4><ol>
<li><p>å¯åŠ¨Hadoopé›†ç¾¤ã€MySQLæœåŠ¡<br>å‰é¢æˆ‘ä»¬å·²ç»å¯åŠ¨äº†Hadoopé›†ç¾¤å’ŒMySQLæœåŠ¡ã€‚è¿™é‡Œè¯·ç¡®è®¤å·²ç»æŒ‰ç…§å‰é¢æ“ä½œå¯åŠ¨æˆåŠŸã€‚</p>
</li>
<li><p>å°†å‰é¢ç”Ÿæˆçš„ä¸´æ—¶è¡¨æ•°æ®ä»Hiveå¯¼å…¥åˆ° MySQL ä¸­ï¼ŒåŒ…å«å¦‚ä¸‹å››ä¸ªæ­¥éª¤ã€‚<br>(1)ç™»å½• MySQL<br>è¯·åœ¨Linuxç³»ç»Ÿä¸­æ–°å»ºä¸€ä¸ªç»ˆç«¯ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql â€“u root â€“p </span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†ç®€åŒ–æ“ä½œï¼Œæœ¬æ•™ç¨‹ç›´æ¥ä½¿ç”¨rootç”¨æˆ·ç™»å½•MySQLæ•°æ®åº“ï¼Œä½†æ˜¯ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»ºè®®åœ¨MySQLä¸­å†å¦å¤–åˆ›å»ºä¸€ä¸ªç”¨æˆ·ã€‚<br>æ‰§è¡Œä¸Šé¢å‘½ä»¤ä»¥åï¼Œå°±è¿›å…¥äº†â€œmysql&gt;â€å‘½ä»¤æç¤ºç¬¦çŠ¶æ€ã€‚<br>(2)åˆ›å»ºæ•°æ®åº“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show databases; #æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“</span><br><span class="line">mysql&gt; create database dblab; #åˆ›å»ºdblabæ•°æ®åº“</span><br><span class="line">mysql&gt; use dblab; #ä½¿ç”¨æ•°æ®åº“</span><br></pre></td></tr></table></figure>
<p><img src="image-20230521161044837.png" alt="image-20230521161044837"></p>
<p>æ³¨æ„ï¼šè¯·ä½¿ç”¨ä¸‹é¢å‘½ä»¤æŸ¥çœ‹æ•°æ®åº“çš„ç¼–ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;show variables like &quot;char%&quot;;</span><br></pre></td></tr></table></figure>
<p>ä¼šæ˜¾ç¤ºç±»ä¼¼ä¸‹é¢çš„ç»“æœï¼š</p>
<p><img src="image-20230521161104860.png" alt="image-20230521161104860"></p>
<p>(3)åˆ›å»ºè¡¨<br>ä¸‹é¢åœ¨MySQLçš„æ•°æ®åº“dblabä¸­åˆ›å»ºä¸€ä¸ªæ–°è¡¨user_actionï¼Œå¹¶è®¾ç½®å…¶ç¼–ç ä¸ºutf-8ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE `dblab`.`user_action` (`id` varchar(50),`uid` varchar(50),`item_id` varchar(50),`behavior_type` varchar(10),`item_category` varchar(50), `visit_date` DATE,`province` varchar(20)) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="image-20230522124332073.png" alt="image-20230522124332073">   </p>
<p>åˆ›å»ºæˆåŠŸåï¼Œè¾“å…¥ä¸‹é¢å‘½ä»¤é€€å‡ºMySQLï¼š</p>
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; exit;</span><br></pre></td></tr></table></figure>
<p>   (4)å¯¼å…¥æ•°æ®(æ‰§è¡Œæ—¶é—´ï¼š20ç§’å·¦å³)<br>   æ³¨æ„ï¼Œåˆšæ‰å·²ç»é€€å‡ºMySQLï¼Œå›åˆ°äº†Shellå‘½ä»¤æç¤ºç¬¦çŠ¶æ€ã€‚ä¸‹é¢å°±å¯ä»¥æ‰§è¡Œæ•°æ®å¯¼å…¥æ“ä½œï¼Œ</p>
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. cd /usr/local/sqoop</span><br><span class="line">2. ./bin/sqoop export --connect jdbc:mysql://localhost:3306/dblab --username root --password hadoop --table user_action --export-dir &#x27;/user/hive/warehouse/dblab.db/user_action&#x27; --fields-terminated-by &#x27;\t&#x27;; #å¯¼å…¥å‘½ä»¤</span><br></pre></td></tr></table></figure>
<p> <img src="image-20230522124620428.png" alt="image-20230522124620428"></p>
<ol>
<li><p>æŸ¥çœ‹MySQLä¸­user_actionè¡¨æ•°æ®</p>
<p>ä¸‹é¢éœ€è¦å†æ¬¡å¯åŠ¨MySQLï¼Œè¿›å…¥â€œmysql&gt;â€å‘½ä»¤æç¤ºç¬¦çŠ¶æ€ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql â€“u root â€“p </span><br></pre></td></tr></table></figure>
<p>ç„¶åæ‰§è¡Œä¸‹é¢å‘½ä»¤æŸ¥è¯¢user_actionè¡¨ä¸­çš„æ•°æ®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.mysql&gt; use dblab;</span><br><span class="line">2.mysql&gt; select * from user_action limit 10;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230522124844454.png" alt="image-20230522124844454"></p>
<p>ä»Hiveå¯¼å…¥æ•°æ®åˆ°MySQLä¸­ï¼ŒæˆåŠŸï¼</p>
</li>
</ol>
<h4 id="4-ä½¿ç”¨Sqoopå°†æ•°æ®ä»MySQLå¯¼å…¥HBase"><a href="#4-ä½¿ç”¨Sqoopå°†æ•°æ®ä»MySQLå¯¼å…¥HBase" class="headerlink" title="4.ä½¿ç”¨Sqoopå°†æ•°æ®ä»MySQLå¯¼å…¥HBase"></a>4.ä½¿ç”¨Sqoopå°†æ•°æ®ä»MySQLå¯¼å…¥HBase</h4><ol>
<li>å¯åŠ¨Hadoopé›†ç¾¤ã€MySQLæœåŠ¡ã€HBaseæœåŠ¡<br>ä¹‹å‰æˆ‘ä»¬å·²ç»å¯åŠ¨äº†Hadoopé›†ç¾¤ã€MySQLæœåŠ¡ï¼Œè¿™é‡Œè¯·ç¡®è®¤å·²ç»æŒ‰ç…§å‰é¢æ“ä½œå¯åŠ¨æˆåŠŸã€‚è¿™é‡Œæˆ‘ä»¬å†å¯åŠ¨HBaseæœåŠ¡ã€‚æœ¬æ•™ç¨‹ä¸­ï¼ŒHBaseçš„å®‰è£…ç›®å½•æ˜¯â€œ/usr/local/hbaseâ€ï¼Œè€Œä¸”æœ¬æ•™ç¨‹ä¸­ï¼ŒHBaseé…ç½®ä¸ºä½¿ç”¨HDFSå­˜å‚¨æ•°æ®ã€‚<br>è¯·æ–°å»ºä¸€ä¸ªç»ˆç«¯ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hbase</span><br><span class="line">2../bin/start-hbase.sh</span><br></pre></td></tr></table></figure>
<ol>
<li>å¯åŠ¨HBase shell</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hbase</span><br><span class="line">2../bin/hbase shell</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨æˆåŠŸåï¼Œå°±è¿›å…¥äº†â€œhbase&gt;â€å‘½ä»¤æç¤ºç¬¦çŠ¶æ€ã€‚</p>
<p><img src="image-20230522125118975.png" alt="image-20230522125106245"></p>
<ol>
<li>åˆ›å»ºè¡¨user_action</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.hbase&gt; create &#x27;user_action&#x27;, &#123; NAME =&gt; &#x27;f1&#x27;, VERSIONS =&gt; 5&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤åœ¨HBaseä¸­åˆ›å»ºäº†ä¸€ä¸ªuser_actionè¡¨ï¼Œè¿™ä¸ªè¡¨ä¸­æœ‰ä¸€ä¸ªåˆ—æ—f1ï¼ˆä½ æ„¿æ„æŠŠåˆ—æ—åç§°å–ä¸ºå…¶ä»–åç§°ä¹Ÿå¯ä»¥ï¼Œæ¯”å¦‚åˆ—æ—åç§°ä¸ºuserinfoï¼‰ï¼Œå†å²ç‰ˆæœ¬ä¿ç•™æ•°é‡ä¸º5ã€‚</p>
<p><img src="image-20230522125249459.png" alt="image-20230522125249459"></p>
<ol>
<li>å¯¼å…¥æ•°æ®(æ‰§è¡Œæ—¶é—´ï¼š30ç§’å·¦å³)<br>ä¸‹é¢æ–°å»ºä¸€ä¸ªç»ˆç«¯ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤å¯¼å…¥æ•°æ®ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/sqoop</span><br><span class="line">2../bin/sqoop  import  --connect jdbc:mysql://localhost:3306/dblab --username root --password root --table user_action --hbase-table user_action --column-family f1 --hbase-row-key id --hbase-create-table -m 1     #-m 1ï¼šä½¿ç”¨å•ä¸ªMapperä»»åŠ¡è¿è¡Œå¯¼å…¥æ“ä½œ</span><br></pre></td></tr></table></figure>
<p><img src="image-20230522125434747.png" alt="image-20230522125434747"></p>
<p><img src="image-20230522125410487.png" alt="image-20230522125410487"></p>
<ol>
<li>æŸ¥çœ‹HBaseä¸­user_actionè¡¨æ•°æ®</li>
</ol>
<p>ç°åœ¨ï¼Œå†æ¬¡åˆ‡æ¢åˆ°HBase Shellè¿è¡Œçš„é‚£ä¸ªç»ˆç«¯çª—å£ï¼Œåœ¨â€œhbase&gt;â€å‘½ä»¤æç¤ºç¬¦ä¸‹ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤æŸ¥è¯¢åˆšæ‰å¯¼å…¥çš„æ•°æ®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.habse&gt; scan &#x27;user_action&#x27;,&#123;LIMIT=&gt;10&#125;  #åªæŸ¥è¯¢å‰é¢10è¡Œ</span><br></pre></td></tr></table></figure>
<p><img src="image-20230522125532825.png" alt="image-20230522125532825"><img src="image-20230522125543413.png" alt="image-20230522125543413"></p>
<h4 id="5-ä½¿ç”¨HBase-Java-APIæŠŠæ•°æ®ä»æœ¬åœ°å¯¼å…¥åˆ°HBaseä¸­"><a href="#5-ä½¿ç”¨HBase-Java-APIæŠŠæ•°æ®ä»æœ¬åœ°å¯¼å…¥åˆ°HBaseä¸­" class="headerlink" title="5.ä½¿ç”¨HBase Java APIæŠŠæ•°æ®ä»æœ¬åœ°å¯¼å…¥åˆ°HBaseä¸­"></a>5.ä½¿ç”¨HBase Java APIæŠŠæ•°æ®ä»æœ¬åœ°å¯¼å…¥åˆ°HBaseä¸­</h4><ol>
<li><p>å¯åŠ¨Hadoopé›†ç¾¤ã€HBaseæœåŠ¡<br>è¯·é¦–å…ˆç¡®ä¿å¯åŠ¨äº†Hadoopé›†ç¾¤å’ŒHBaseæœåŠ¡ã€‚å¦‚æœè¿˜æ²¡æœ‰å¯åŠ¨ï¼Œè¯·åœ¨Linuxç³»ç»Ÿä¸­æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ã€‚<br>é¦–å…ˆï¼ŒæŒ‰ç…§ä¸‹é¢å‘½ä»¤å¯åŠ¨Hadoopï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hadoop</span><br><span class="line">2../sbin/start-all.sh</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼ŒæŒ‰ç…§ä¸‹é¢å‘½ä»¤å¯åŠ¨HBaseï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/hbase</span><br><span class="line">2../bin/start-hbase.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ•°æ®å‡†å¤‡<br>å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–å†™Javaç¨‹åºï¼Œç›´æ¥ä»HDFSä¸­è¯»å–æ•°æ®åŠ è½½åˆ°HBaseã€‚ä½†æ˜¯ï¼Œè¿™é‡Œæˆ‘ä»¬å±•ç¤ºçš„æ˜¯å¦‚ä½•ç”¨JAVAç¨‹åºæŠŠæœ¬åœ°æ•°æ®å¯¼å…¥åˆ°HBaseä¸­ã€‚ä½ åªè¦æŠŠç¨‹åºåšç®€å•ä¿®æ”¹ï¼Œå°±å¯ä»¥å®ç°ä»HDFSä¸­è¯»å–æ•°æ®åŠ è½½åˆ°HBaseã€‚<br>é¦–å…ˆï¼Œè¯·å°†ä¹‹å‰çš„user_actionæ•°æ®ä»HDFSå¤åˆ¶åˆ°Linuxç³»ç»Ÿçš„æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.cd /usr/local/bigdatacase/dataset</span><br><span class="line">2./usr/local/hadoop/bin/hdfs dfs -get /user/hive/warehouse/dblab.db/user_action .</span><br><span class="line">3. #å°†HDFSä¸Šçš„user_actionæ•°æ®å¤åˆ¶åˆ°æœ¬åœ°å½“å‰ç›®å½•ï¼Œæ³¨æ„&#x27;.&#x27;è¡¨ç¤ºå½“å‰ç›®å½•</span><br><span class="line">4.cat ./user_action/* | head -10   #æŸ¥çœ‹å‰10è¡Œæ•°æ®</span><br><span class="line">5.cat ./user_action/00000* &gt; user_action.output #å°†00000*æ–‡ä»¶å¤åˆ¶ä¸€ä»½é‡å‘½åä¸ºuser_action.outputï¼Œ*è¡¨ç¤ºé€šé…ç¬¦</span><br><span class="line">6.head user_action.output  #æŸ¥çœ‹user_action.outputå‰10è¡Œ</span><br></pre></td></tr></table></figure>
<p><img src="image-20230522130559410.png" alt="image-20230522130559410"></p>
</li>
<li><p>ç¼–å†™æ•°æ®å¯¼å…¥ç¨‹åº<br>æˆ‘ä»¬è¿™é‡Œé‡‡ç”¨Eclipseç¼–å†™Javaç¨‹åºå®ç°HBaseæ•°æ®å¯¼å…¥åŠŸèƒ½ã€‚å…³äºå¦‚ä½•ä½¿ç”¨Eclipseç¼–å†™Javaç¨‹åºè°ƒç”¨HBase APIï¼Œ</p>
<p>è¯·ä½¿ç”¨Eclipseç¼–å†™ImportHBaseç¨‹åºï¼ˆJavaä»£ç åœ¨æœ¬æ–‡æœ€åçš„é™„å½•éƒ¨åˆ†ï¼‰ï¼Œå¹¶æ‰“åŒ…æˆå¯æ‰§è¡ŒjaråŒ…ï¼Œå‘½åä¸ºImportHBase.jarã€‚<br>ç„¶åï¼Œè¯·åœ¨â€œ/usr/local/bigdatacase/â€ç›®å½•ä¸‹é¢æ–°å»ºä¸€ä¸ªhbaseå­ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾ImportHBase.jarã€‚</p>
</li>
<li><p>æ•°æ®å¯¼å…¥<br>ç°åœ¨å¼€å§‹æ‰§è¡Œæ•°æ®å¯¼å…¥æ“ä½œã€‚<br>ä½¿ç”¨Javaç¨‹åºå°†æ•°æ®ä»æœ¬åœ°å¯¼å…¥HBaseä¸­ï¼Œå¯¼å…¥å‰ï¼Œè¯·å…ˆæ¸…ç©ºuser_actionè¡¨ã€‚<br>è¯·åœ¨ä¹‹å‰å·²ç»æ‰“å¼€çš„HBase Shellçª—å£ä¸­ï¼ˆä¹Ÿå°±æ˜¯åœ¨â€œhbase&gt;â€å‘½ä»¤æç¤ºç¬¦ä¸‹ï¼‰æ‰§è¡Œä¸‹é¢æ“ä½œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hbase&gt; truncate &#x27;user_action&#x27;</span><br><span class="line">hbase&gt; scan &#x27;user_action&#x27;,&#123;LIMIT=&gt;10&#125;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230522130739191.png" alt="image-20230522130739191"></p>
<p>ä¸‹é¢å°±å¯ä»¥è¿è¡Œhadoop jarå‘½ä»¤è¿è¡Œç¨‹åºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1./usr/local/hadoop/bin/hadoop jar /usr/local/bigdatacase/hbase/ImportHBase.jar HBaseImportTest /usr/local/bigdatacase/dataset/user_action.output</span><br></pre></td></tr></table></figure>
<p><img src="image-20230522131228298.png" alt="image-20230522131228298"></p>
</li>
<li><p>æŸ¥çœ‹HBaseä¸­user_actionè¡¨æ•°æ®<br>ä¸‹é¢ï¼Œå†æ¬¡åˆ‡æ¢åˆ°HBase Shellçª—å£ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤æŸ¥è¯¢æ•°æ®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">habse&gt; scan &#x27;user_action&#x27;,&#123;LIMIT=&gt;10&#125;  #åªæŸ¥è¯¢å‰é¢10è¡Œ</span><br></pre></td></tr></table></figure>
<p><img src="image-20230522131301266.png" alt="image-20230522131301266"><img src="image-20230522131320818.png" alt="image-20230522131320818"></p>
<p>å®éªŒé¡ºåˆ©ç»“æŸï¼</p>
</li>
</ol>
<h3 id="å››-åˆ©ç”¨Rè¿›è¡Œæ•°æ®å¯è§†åŒ–åˆ†æ"><a href="#å››-åˆ©ç”¨Rè¿›è¡Œæ•°æ®å¯è§†åŒ–åˆ†æ" class="headerlink" title="å››.åˆ©ç”¨Rè¿›è¡Œæ•°æ®å¯è§†åŒ–åˆ†æ"></a>å››.åˆ©ç”¨Rè¿›è¡Œæ•°æ®å¯è§†åŒ–åˆ†æ</h3><h4 id="1-ç¯å¢ƒ"><a href="#1-ç¯å¢ƒ" class="headerlink" title="1.ç¯å¢ƒ"></a>1.ç¯å¢ƒ</h4><p>Rè¯­è¨€åŒ…çš„å®‰è£…æ–¹å¼å¦‚ä¸‹ï¼š<br>Ubuntuè‡ªå¸¦çš„APTåŒ…ç®¡ç†å™¨ä¸­çš„Rå®‰è£…åŒ…æ€»æ˜¯è½åäºæ ‡å‡†ç‰ˆï¼Œå› æ­¤éœ€è¦æ·»åŠ æ–°çš„é•œåƒæºæŠŠAPTåŒ…ç®¡ç†ä¸­çš„Rå®‰è£…åŒ…æ›´æ–°åˆ°æœ€æ–°ç‰ˆã€‚<br>è¯·ç™»å½•Linuxç³»ç»Ÿï¼Œæ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œç„¶åæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼ˆå¹¶æ³¨æ„ä¿æŒç½‘ç»œè¿é€šï¼Œå¯ä»¥è®¿é—®äº’è”ç½‘ï¼Œå› ä¸ºå®‰è£…è¿‡ç¨‹è¦ä¸‹è½½å„ç§å®‰è£…æ–‡ä»¶ï¼‰ï¼š<br>åˆ©ç”¨vimæ‰“å¼€/etc/apt/sources.listæ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/apt/sources.list</span><br></pre></td></tr></table></figure>
<p><img src="image-20230522133033912.png" alt="image-20230522133033912"></p>
<p>åœ¨æ–‡ä»¶çš„æœ€åä¸€è¡Œæ·»åŠ å¦é—¨å¤§å­¦çš„é•œåƒæºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/CRAN/bin/linux/ubuntu bionic-cran40/</span><br></pre></td></tr></table></figure>
<p><img src="image-20230523200613895.png" alt="image-20230523200613895"></p>
<p>é€€å‡ºvimï¼Œæ›´æ–°è½¯ä»¶æºåˆ—è¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt upgrade</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœæ›´æ–°è½¯ä»¶æºå‡ºç°ç”±äºæ²¡æœ‰å…¬é’¥ï¼Œæ— æ³•éªŒè¯ä¸‹åˆ—ç­¾åçš„é”™è¯¯ï¼Œè¯·æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</span><br><span class="line">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9</span><br></pre></td></tr></table></figure>
<p><img src="image-20230522134907922.png" alt="image-20230522134907922"></p>
<p><img src="image-20230523200807914.png" alt="image-20230523200807914"></p>
<h4 id="2-å®‰è£…Rè¯­è¨€"><a href="#2-å®‰è£…Rè¯­è¨€" class="headerlink" title="2.å®‰è£…Rè¯­è¨€"></a>2.å®‰è£…Rè¯­è¨€</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install r-base</span><br></pre></td></tr></table></figure>
<p><img src="image-20230523201233068.png" alt="image-20230523201233068"><img src="image-20230523201617463.png" alt="image-20230523201617463"></p>
<p>ä¼šæç¤ºâ€œæ‚¨å¸Œæœ›ç»§ç»­æ‰§è¡Œå—ï¼Ÿ[Y/n]â€ï¼Œå¯ä»¥ç›´æ¥é”®ç›˜è¾“å…¥â€œYâ€ï¼Œå°±å¯ä»¥é¡ºåˆ©å®‰è£…ç»“æŸã€‚<br>å®‰è£…ç»“æŸåï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢å‘½ä»¤å¯åŠ¨Rï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">R</span><br></pre></td></tr></table></figure>
<p><img src="image-20230523201705646.png" alt="image-20230523201705646"></p>
<p>å¯åŠ¨åï¼Œä¼šæ˜¾ç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼Œå¹¶è¿›å…¥â€œ&gt;â€å‘½ä»¤æç¤ºç¬¦çŠ¶æ€ï¼š</p>
<p>â€œ&gt;â€å°±æ˜¯Rçš„å‘½ä»¤æç¤ºç¬¦ï¼Œä½ å¯ä»¥åœ¨åé¢è¾“å…¥Rè¯­è¨€å‘½ä»¤ã€‚<br>å¯ä»¥æ‰§è¡Œä¸‹é¢å‘½ä»¤é€€å‡ºRï¼š</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span>q<span class="punctuation">(</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><img src="image-20230522141408928.png" alt="image-20230522141408928"></p>
<h4 id="3-å¯è§†åŒ–åˆ†æMySQLä¸­çš„æ•°æ®"><a href="#3-å¯è§†åŒ–åˆ†æMySQLä¸­çš„æ•°æ®" class="headerlink" title="3.å¯è§†åŒ–åˆ†æMySQLä¸­çš„æ•°æ®"></a>3.å¯è§†åŒ–åˆ†æMySQLä¸­çš„æ•°æ®</h4><h5 id="1-å®‰è£…ä¾èµ–åº“"><a href="#1-å®‰è£…ä¾èµ–åº“" class="headerlink" title="1.å®‰è£…ä¾èµ–åº“"></a>1.å®‰è£…ä¾èµ–åº“</h5><p>ä¿®æ”¹Rçš„æº</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">options()$repos  ## æŸ¥çœ‹ä½¿ç”¨install.packageså®‰è£…æ—¶çš„é»˜è®¤é•œåƒ</span><br><span class="line">options()$BioC_mirror ##æŸ¥çœ‹ä½¿ç”¨bioconductorçš„é»˜è®¤é•œåƒ</span><br><span class="line">options(BioC_mirror=&quot;https://mirrors.ustc.edu.cn/bioc/&quot;) ##æŒ‡å®šé•œåƒï¼Œè¿™ä¸ªæ˜¯ä¸­å›½ç§‘æŠ€å¤§å­¦é•œåƒ</span><br><span class="line">options(&quot;repos&quot; = c(CRAN=&quot;https://mirrors.tuna.tsinghua.edu.cn/CRAN/&quot;)) ##æŒ‡å®šinstall.packageså®‰è£…é•œåƒï¼Œè¿™ä¸ªæ˜¯æ¸…åé•œåƒ</span><br></pre></td></tr></table></figure>
<p><img src="image-20230524103935911.png" alt="image-20230524103935911"></p>
<p>ä¸ºäº†å®Œæˆå¯è§†åŒ–åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºRå®‰è£…ä¸€äº›ä¾èµ–åº“ï¼ŒåŒ…æ‹¬ï¼šRMySQLã€ggplot2ã€devtoolså’Œrechartsã€‚<br>RMySQLæ˜¯ä¸€ä¸ªæä¾›äº†è®¿é—®MySQLæ•°æ®åº“çš„Rè¯­è¨€æ¥å£ç¨‹åºçš„Rè¯­è¨€ä¾èµ–åº“ã€‚<br>ggplot2å’Œrechartsåˆ™æ˜¯Rè¯­è¨€ä¸­æä¾›ç»˜å›¾å¯è§†åŒ–åŠŸèƒ½çš„ä¾èµ–åº“ã€‚<br>è¯·å¯åŠ¨Rè¿›å…¥Rå‘½ä»¤æç¤ºç¬¦çŠ¶æ€,æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…RMySQLï¼š</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span><span class="operator">&gt;</span> install.packages<span class="punctuation">(</span><span class="string">&#x27;RMySQL&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><img src="image-20230523201900882.png" alt="image-20230522141605217"></p>
<p>ä¸Šé¢å‘½ä»¤æ‰§è¡Œåï¼Œ å±å¹•ä¼šæç¤ºâ€Would you like to user a personal library instead?(y/n)â€ç­‰é—®é¢˜ï¼Œåªè¦é‡åˆ°æé—®ï¼Œéƒ½åœ¨é”®ç›˜è¾“å…¥yåå›è½¦å³å¯ã€‚ç„¶åï¼Œå±å¹•ä¼šæ˜¾ç¤ºâ€œâ€”åœ¨æ­¤è¿çº¿é˜¶æ®µæ—¶è¯·é€‰ç”¨CRANçš„é•œå­â€”â€ï¼Œå¹¶ä¼šå¼¹å‡ºä¸€ä¸ªç™½è‰²èƒŒæ™¯çš„ç«–æ¡å½¢çª—å£ï¼Œçª—å£æ ‡é¢˜æ˜¯â€œHTTPS CRAN mirrosâ€ï¼Œæ ‡é¢˜ä¸‹é¢åˆ—å‡ºäº†å¾ˆå¤šå›½å®¶çš„é•œåƒåˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä½äºChinaçš„é•œåƒï¼Œæ¯”å¦‚ï¼Œé€‰æ‹©â€œChina(Beijing)[https]â€ï¼Œç„¶åç‚¹å‡»â€œokâ€æŒ‰é’®ï¼Œå°±å¼€å§‹å®‰è£…äº†ã€‚å®‰è£…è¿‡ç¨‹éœ€è¦å‡ åˆ†é’Ÿï¼ˆå½“ç„¶ï¼Œä¹Ÿå’Œå½“å‰ç½‘ç»œé€Ÿåº¦æœ‰å…³ç³»ï¼‰ã€‚<br>ç”±äºä¸åŒç”¨æˆ·çš„Ubuntuå¼€å‘ç¯å¢ƒä¸ä¸€æ ·ï¼Œå®‰è£…æœ‰å¾ˆå¤§å¯èƒ½å› ä¸ºç¼ºå°‘ç»„ä»¶å¯¼è‡´å¤±è´¥ï¼Œå¦‚æœå‡ºç°å¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<p>åªè¦æ ¹æ®é”™è¯¯ç»™å‡ºçš„é”™è¯¯ä¿¡æ¯ï¼Œè¿›è¡Œæ“ä½œå³å¯ã€‚q()é€€å‡ºRå‘½ä»¤æç¤ºç¬¦çŠ¶æ€ï¼Œå›åˆ°ShellçŠ¶æ€,ç¬”è€…çš„ç³»ç»Ÿæ˜¯Ubuntu 16.04,é‚£ä¹ˆï¼Œæ ¹æ®ä¸Šé¢çš„è‹±æ–‡é”™è¯¯ä¿¡æ¯ï¼Œå°±éœ€è¦åœ¨Shellå‘½ä»¤æç¤ºç¬¦çŠ¶æ€ä¸‹æ‰§è¡Œä¸‹é¢å‘½ä»¤å®‰è£…libmariadb-client-lgpl-devï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.sudo apt-get install libmariadb-client-lgpl-dev</span><br></pre></td></tr></table></figure>
<p><img src="image-20230523204134560.png" alt="image-20230523204134560"></p>
<p>ç„¶åï¼Œå†æ¬¡è¾“å…¥ä¸‹é¢å‘½ä»¤è¿›å…¥Rå‘½ä»¤æç¤ºç¬¦çŠ¶æ€ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">R</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨åï¼Œå¹¶è¿›å…¥â€œ&gt;â€å‘½ä»¤æç¤ºç¬¦çŠ¶æ€ã€‚ç„¶åï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ç»˜å›¾åŒ…ggplot2ï¼Œå¦‚æœè¿˜å‡ºç°ç¼ºå°‘ç»„ä»¶çš„é”™è¯¯ï¼Œè¯·æŒ‰ç…§ä¸Šé¢çš„è§£å†³æ–¹æ¡ˆè§£å†³ï¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.&gt; install.packages(&#x27;ggplot2&#x27;)</span><br></pre></td></tr></table></figure>
<p><img src="image-20230522142215489.png" alt="image-20230522142215489"></p>
<p>ç„¶åï¼Œå±å¹•ä¼šæ˜¾ç¤ºâ€œâ€”åœ¨æ­¤è¿çº¿é˜¶æ®µæ—¶è¯·é€‰ç”¨CRANçš„é•œå­â€”â€ï¼Œå¹¶ä¼šå¼¹å‡ºä¸€ä¸ªç™½è‰²èƒŒæ™¯çš„ç«–æ¡å½¢çª—å£ï¼Œçª—å£æ ‡é¢˜æ˜¯â€œHTTPS CRAN mirrosâ€ï¼Œæ ‡é¢˜ä¸‹é¢åˆ—å‡ºäº†å¾ˆå¤šå›½å®¶çš„é•œåƒåˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä½äºChinaçš„é•œåƒï¼Œæ¯”å¦‚ï¼Œé€‰æ‹©â€œChina(Beijing)[https]â€ï¼Œç„¶åç‚¹å‡»â€œokâ€æŒ‰é’®ï¼Œå°±å¼€å§‹å®‰è£…äº†ã€‚è¿™ä¸ªå‘½ä»¤è¿è¡Œåï¼Œå¤§æ¦‚éœ€è¦å®‰è£…10åˆ†é’Ÿæ—¶é—´ï¼ˆå½“ç„¶ï¼Œä¹Ÿå’Œå½“å‰ç½‘ç»œé€Ÿåº¦æœ‰å…³ç³»ï¼‰ã€‚<br>ä¸‹é¢ç»§ç»­è¿è¡Œä¸‹é¢å‘½ä»¤å®‰è£…devtoolsï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.&gt; install.packages(&#x27;devtools&#x27;)</span><br></pre></td></tr></table></figure>
<p><img src="image-20230522142345991.png" alt="image-20230522142345991"></p>
<p>å¦‚æœåœ¨ä¸Šé¢å®‰è£…devtoolsçš„è¿‡ç¨‹ä¸­ï¼Œåˆå‡ºç°äº†é”™è¯¯ï¼Œå¤„ç†æ–¹æ³•å¾ˆç®€å•ï¼Œè¿˜æ˜¯æŒ‰ç…§ä¸Šé¢ä»‹ç»çš„æ–¹æ³•ï¼Œæ ¹æ®å±å¹•ä¸Šç»™å‡ºçš„è‹±æ–‡é”™è¯¯ä¿¡æ¯ï¼Œç¼ºå°‘ä»€ä¹ˆè½¯ä»¶ï¼Œå°±ç”¨sudo apt-get installå‘½ä»¤å®‰è£…è¯¥è½¯ä»¶å°±å¯ä»¥äº†ã€‚ç¬”è€…åœ¨Ubuntu16.04ä¸Šæ‰§è¡Œdevtoolså®‰è£…æ—¶ï¼Œå‡ºç°äº†ä¸‰æ¬¡é”™è¯¯ï¼Œç¬”è€…æ ¹æ®æ¯æ¬¡é”™è¯¯çš„è‹±æ–‡æç¤ºä¿¡æ¯ï¼Œå®‰è£…äº†ä¸‰ä¸ªè½¯ä»¶libssl-devã€libssh2-1-devã€libcurl4-openssl-devï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.sudo apt-get install libssl-dev</span><br><span class="line">2.sudo apt-get install libssh2-1-dev</span><br><span class="line">3.sudo apt-get install libcurl4-openssl-dev</span><br></pre></td></tr></table></figure>
<p><img src="image-20230522142709011.png" alt="image-20230522142709011"></p>
<p><img src="image-20230522142728262.png" alt="image-20230522142728262"></p>
<p>è¯»è€…åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸åŒçš„é”™è¯¯ï¼ŒæŒ‰ç…§åŒæ ·çš„å¤„ç†æ–¹æ³•å¯ä»¥é¡ºåˆ©è§£å†³ã€‚</p>
<p>ä¸‹é¢åœ¨Rå‘½ä»¤æç¤ºç¬¦ä¸‹å†æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…taiyun/rechartsï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.&gt; devtools::install_github(&#x27;taiyun/recharts&#x27;)</span><br></pre></td></tr></table></figure>
<h5 id="2-åˆ†æ"><a href="#2-åˆ†æ" class="headerlink" title="2.åˆ†æ"></a>2.åˆ†æ</h5><p>ä»¥ä¸‹åˆ†æä½¿ç”¨çš„å‡½æ•°æ–¹æ³•ï¼Œéƒ½å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥è¯¢å‡½æ•°çš„ç›¸å…³æ–‡æ¡£ã€‚ä¾‹å¦‚ï¼šæŸ¥è¯¢sort()å‡½æ•°å¦‚ä½•ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.?sort</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼Œå°±ä¼šè¿›å…¥å†’å·â€œ:â€æç¤ºç¬¦çŠ¶æ€ï¼ˆä¹Ÿå°±æ˜¯å¸®åŠ©æ–‡æ¡£çŠ¶æ€ï¼‰ï¼Œåœ¨å†’å·åé¢è¾“å…¥qå³å¯é€€å‡ºå¸®åŠ©æ–‡æ¡£çŠ¶æ€ï¼Œè¿”å›åˆ°Ræç¤ºç¬¦çŠ¶æ€ï¼</p>
<ol>
<li><p>è¿æ¥MySQL,å¹¶è·å–æ•°æ®</p>
<p>è¯·åœ¨Linuxç³»ç»Ÿä¸­æ–°å»ºå¦å¤–ä¸€ä¸ªç»ˆç«¯ï¼Œç„¶åæ‰§è¡Œä¸‹é¢å‘½ä»¤å¯åŠ¨MySQLæ•°æ®åº“ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.service mysql start</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢ï¼Œè®©æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹MySQLæ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œè¯·æ‰§è¡Œä¸‹é¢å‘½ä»¤è¿›å…¥MySQLå‘½ä»¤æç¤ºç¬¦çŠ¶æ€ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.mysql -u root -p</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢å°±å¯ä»¥è¾“å…¥ä¸€äº›SQLè¯­å¥æŸ¥è¯¢æ•°æ®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.mysql&gt; use dblab;</span><br><span class="line">2.mysql&gt; select * from user_action limit 10;</span><br></pre></td></tr></table></figure>
<p><img src="image-20230522200233331.png" alt="image-20230522200233331"></p>
<p>ç„¶ååˆ‡æ¢åˆ°åˆšæ‰å·²ç»æ‰“å¼€çš„Rå‘½ä»¤æç¤ºç¬¦ç»ˆç«¯çª—å£ï¼š</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>library<span class="punctuation">(</span>RMySQL<span class="punctuation">)</span></span><br><span class="line"><span class="number">2.</span>conn <span class="operator">&lt;-</span> dbConnect<span class="punctuation">(</span>MySQL<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span>dbname<span class="operator">=</span><span class="string">&#x27;dblab&#x27;</span><span class="punctuation">,</span>username<span class="operator">=</span><span class="string">&#x27;root&#x27;</span><span class="punctuation">,</span>password<span class="operator">=</span><span class="string">&#x27;hadoop&#x27;</span><span class="punctuation">,</span>host<span class="operator">=</span><span class="string">&quot;127.0.0.1&quot;</span><span class="punctuation">,</span>port<span class="operator">=</span><span class="number">3306</span><span class="punctuation">)</span></span><br><span class="line"><span class="number">3.</span>user_action <span class="operator">&lt;-</span> dbGetQuery<span class="punctuation">(</span>conn<span class="punctuation">,</span><span class="string">&#x27;select * from user_action&#x27;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><img src="image-20230522200239746.png" alt="image-20230522200239746"></p>
<ol>
<li><p>åˆ†ææ¶ˆè´¹è€…å¯¹å•†å“çš„è¡Œä¸º</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.</span>summary<span class="punctuation">(</span>user_action<span class="operator">$</span>behavior_type<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p><img src="image-20230522200248577.png" alt="image-20230522200248577"></p>
<p>summary() å‡½æ•°å¯ä»¥å¾—åˆ°æ ·æœ¬æ•°æ®ç±»å‹å’Œé•¿åº¦,å¦‚æœæ ·æœ¬æ˜¯æ•°å€¼å‹,æˆ‘ä»¬è¿˜èƒ½å¾—åˆ°æ ·æœ¬æ•°æ®çš„æœ€å°å€¼ã€æœ€å¤§å€¼ã€å››åˆ†ä½æ•°ä»¥åŠå‡å€¼ä¿¡æ¯ã€‚ï¼ˆåŒ…æ‹¬è®¡æ•°ã€æœ€å°å€¼ã€ç¬¬ä¸€å››åˆ†ä½æ•°ã€ä¸­ä½æ•°ã€ç¬¬ä¸‰å››åˆ†ä½æ•°å’Œæœ€å¤§å€¼ï¼‰<br>å¾—åˆ°ç»“æœï¼š</p>
<p>å¯ä»¥çœ‹å‡ºåŸæ¥çš„MySQLæ•°æ®ä¸­,æ¶ˆè´¹è€…è¡Œä¸ºå˜é‡çš„ç±»å‹æ˜¯å­—ç¬¦å‹ã€‚è¿™æ ·ä¸å¥½åšæ¯”è¾ƒï¼Œéœ€è¦æŠŠæ¶ˆè´¹è€…è¡Œä¸ºå˜é‡è½¬æ¢ä¸ºæ•°å€¼å‹å˜é‡</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>summary<span class="punctuation">(</span><span class="built_in">as.numeric</span><span class="punctuation">(</span>user_action<span class="operator">$</span>behavior_type<span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°ç»“æœï¼š</p>
<p><img src="image-20230522200255218.png" alt="image-20230522200255218"></p>
<p>æ¥ä¸‹æ¥ç”¨æŸ±çŠ¶å›¾è¡¨ç¤ºï¼š</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>library<span class="punctuation">(</span>ggplot2<span class="punctuation">)</span></span><br><span class="line"><span class="number">3.</span>ggplot<span class="punctuation">(</span>user_action<span class="punctuation">,</span>aes<span class="punctuation">(</span><span class="built_in">as.numeric</span><span class="punctuation">(</span>behavior_type<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="operator">+</span>geom_histogram<span class="punctuation">(</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä½¿ç”¨ggplot2åº“çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨libraryå¯¼å…¥åº“ã€‚ggplot()ç»˜åˆ¶æ—¶ï¼Œåˆ›å»ºç»˜å›¾å¯¹è±¡ï¼Œå³ç¬¬ä¸€ä¸ªå›¾å±‚ï¼ŒåŒ…å«ä¸¤ä¸ªå‚æ•°(æ•°æ®ä¸å˜é‡åç§°æ˜ å°„).å˜é‡åç§°éœ€è¦è¢«åŒ…å«aeså‡½æ•°é‡Œé¢ã€‚ggplot2çš„å›¾å±‚ä¸å›¾å±‚ä¹‹é—´ç”¨â€œ+â€è¿›è¡Œè¿æ¥ã€‚ggplot2åŒ…ä¸­çš„geom_histogram()å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°ç›´æ–¹å›¾çš„ç»˜åˆ¶ï¼Œ<code>aes()</code>å‡½æ•°æŒ‡å®šäº†å˜é‡çš„æ˜ å°„æ–¹å¼å°†æ•°å€¼å‹<code>behavior_type</code>åˆ—æ˜ å°„åˆ°xè½´ä¸Šã€‚</p>
<p>åˆ†æç»“æœå¦‚ä¸‹å›¾:</p>
<p><img src="image-20230628190044620.png" alt="image-20230628190044620"></p>
<p>ä»ä¸Šå›¾å¯ä»¥å¾—åˆ°:å¤§éƒ¨åˆ†æ¶ˆè´¹è€…è¡Œä¸ºä»…ä»…åªæ˜¯æµè§ˆã€‚åªæœ‰å¾ˆå°‘éƒ¨åˆ†çš„æ¶ˆè´¹è€…ä¼šè´­ä¹°å•†å“ã€‚</p>
</li>
<li><p>åˆ†æå“ªä¸€ç±»å•†å“è¢«è´­ä¹°æ€»é‡å‰åçš„å•†å“å’Œè¢«è´­ä¹°æ€»é‡</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.</span>temp <span class="operator">&lt;-</span> subset<span class="punctuation">(</span>user_action<span class="punctuation">,</span><span class="built_in">as.numeric</span><span class="punctuation">(</span>behavior_type<span class="punctuation">)</span><span class="operator">==</span><span class="number">4</span><span class="punctuation">)</span> <span class="comment"># è·å–å­æ•°æ®é›†</span></span><br><span class="line"><span class="number">1.</span>count <span class="operator">&lt;-</span> sort<span class="punctuation">(</span>table<span class="punctuation">(</span>temp<span class="operator">$</span>item_category<span class="punctuation">)</span><span class="punctuation">,</span>decreasing <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span> <span class="comment">#æ’åº</span></span><br><span class="line"><span class="number">2.</span>print<span class="punctuation">(</span>count<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">10</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="comment"># è·å–ç¬¬1åˆ°10ä¸ªæ’åºç»“æœ</span></span><br></pre></td></tr></table></figure>
<p>subset()å‡½æ•°ï¼Œä»æŸä¸€ä¸ªæ•°æ®æ¡†ä¸­é€‰æ‹©å‡ºç¬¦åˆæŸæ¡ä»¶çš„æ•°æ®æˆ–æ˜¯ç›¸å…³çš„åˆ—.table()å¯¹åº”çš„å°±æ˜¯ç»Ÿè®¡å­¦ä¸­çš„åˆ—è”è¡¨ï¼Œæ˜¯ä¸€ç§è®°å½•é¢‘æ•°çš„æ–¹æ³•.sort()è¿›è¡Œæ’åºï¼Œè¿”å›æ’åºåçš„æ•°å€¼å‘é‡ã€‚</p>
<p>åœ¨<code>user_action</code>æ•°æ®æ¡†ä¸­åˆ›å»ºäº†ä¸€ä¸ªå­é›†<code>temp</code>ï¼Œè¯¥å­é›†åŒ…å«åœ¨<code>behavior_type</code>åˆ—ä¸­æ•°å€¼ç­‰äº4çš„æ‰€æœ‰è¡Œã€‚</p>
<p>ä»£ç ä½¿ç”¨äº†<code>table()</code>å‡½æ•°å¯¹ä¸åŒ<code>item_category</code>çš„å‡ºç°æ¬¡æ•°è¿›è¡Œè®¡æ•°ï¼Œç„¶åä½¿ç”¨<code>sort()</code>å‡½æ•°å°†è®¡æ•°ç»“æœæŒ‰ç…§é¢‘æ¬¡ä»å¤§åˆ°å°è¿›è¡Œæ’åºã€‚åœ¨<code>sort()</code>å‡½æ•°ä¸­ï¼Œ<code>decreasing=T</code>å‚æ•°è¡¨ç¤ºæŒ‰ç…§é€†åºæ’åˆ—</p>
<p>å¾—åˆ°ç»“æœï¼š</p>
<p><img src="image-20230522200312006.png" alt="image-20230522200312006"></p>
<p>ç»“æœç¬¬ä¸€è¡Œè¡¨ç¤ºå•†å“åˆ†ç±»,è¯¥ç±»ä¸‹è¢«æ¶ˆè´¹çš„æ•°æ¬¡ã€‚<br>æ¥ä¸‹æ¥ç”¨æ•£ç‚¹å›¾è¡¨ç¤º:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span>result <span class="operator">&lt;-</span> as.data.frame<span class="punctuation">(</span>count<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">10</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="comment">#å°†countçŸ©é˜µç»“æœè½¬æ¢æˆæ•°æ®æ¡†</span></span><br><span class="line"><span class="number">4.</span>ggplot<span class="punctuation">(</span>result<span class="punctuation">,</span>aes<span class="punctuation">(</span>Var1<span class="punctuation">,</span>Freq<span class="punctuation">,</span>col<span class="operator">=</span>factor<span class="punctuation">(</span>Var1<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="operator">+</span>geom_point<span class="punctuation">(</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ as.data.frame() æŠŠçŸ©é˜µç­‰è½¬æ¢æˆä¸ºæ•°æ®æ¡†.<br>åˆ†æç»“æœå¦‚ä¸‹å›¾:</p>
<p><img src="image-20230522200318462.png" alt="image-20230522200318462"></p>
</li>
<li><p>åˆ†ææ¯å¹´çš„å“ªä¸ªæœˆä»½è´­ä¹°å•†å“çš„é‡æœ€å¤š</p>
<p>ä»MySQLç›´æ¥è·å–çš„æ•°æ®ä¸­visit_dateå˜é‡éƒ½æ˜¯2014å¹´ä»½,å¹¶æ²¡æœ‰åˆ’åˆ†å‡ºå…·ä½“çš„æœˆä»½,é‚£ä¹ˆå¯ä»¥åœ¨æ•°æ®é›†å¢åŠ ä¸€åˆ—æœˆä»½æ•°æ®ã€‚</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.</span>month <span class="operator">&lt;-</span> substr<span class="punctuation">(</span>user_action<span class="operator">$</span>visit_date<span class="punctuation">,</span><span class="number">6</span><span class="punctuation">,</span><span class="number">7</span><span class="punctuation">)</span> <span class="comment"># visit_dateå˜é‡ä¸­æˆªå–æœˆä»½</span></span><br><span class="line"><span class="number">1.</span>user_action <span class="operator">&lt;-</span> cbind<span class="punctuation">(</span>user_action<span class="punctuation">,</span>month<span class="punctuation">)</span> <span class="comment"># user_actionå¢åŠ ä¸€åˆ—æœˆä»½æ•°æ®</span></span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ç”¨æŸ±çŠ¶å›¾åˆ†åˆ«è¡¨ç¤ºæ¶ˆè´¹è€…è´­ä¹°é‡</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span>ggplot<span class="punctuation">(</span>user_action<span class="punctuation">,</span>aes<span class="punctuation">(</span><span class="built_in">as.numeric</span><span class="punctuation">(</span>behavior_type<span class="punctuation">)</span><span class="punctuation">,</span>col<span class="operator">=</span>factor<span class="punctuation">(</span>month<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="operator">+</span>geom_histogram<span class="punctuation">(</span><span class="punctuation">)</span><span class="operator">+</span>facet_grid<span class="punctuation">(</span>.<span class="operator">~</span>month<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>aes()å‡½æ•°ä¸­çš„colå±æ€§å¯ä»¥ç”¨æ¥è®¾ç½®é¢œè‰²ã€‚factor()å‡½æ•°åˆ™æ˜¯æŠŠæ•°å€¼å˜é‡è½¬æ¢æˆåˆ†ç±»å˜é‡,ä½œç”¨æ˜¯ä»¥ä¸åŒçš„é¢œè‰²è¡¨ç¤ºã€‚å¦‚æœä¸ä½¿ç”¨factor()å‡½æ•°ï¼Œé¢œè‰²å°†ä»¥åŒä¸€ç§é¢œè‰²æ¸å˜çš„é¢œè‰²è¡¨ç°ã€‚ facet_grid(.~month)è¡¨ç¤ºæŸ±çŠ¶å›¾æŒ‰ç…§ä¸åŒæœˆä»½è¿›è¡Œåˆ†åŒºã€‚<br>ç”±äºMySQLè·å–çš„æ•°æ®ä¸­åªæœ‰11æœˆä»½å’Œ12æœˆä»½çš„æ•°æ®,æ‰€ä»¥ä¸Šå›¾åªæœ‰æ˜¾ç¤ºä¸¤ä¸ªè¡¨æ ¼ã€‚<br>åˆ†æç»“æœå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="image-20230628190435063.png" alt="image-20230628190435063"><img src="image-20230628190702238.png" alt="image-20230628190702238"></p>
</li>
<li><p>åˆ†æå›½å†…å“ªä¸ªçœä»½çš„æ¶ˆè´¹è€…æœ€æœ‰è´­ä¹°æ¬²æœ›</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.</span>library<span class="punctuation">(</span>recharts<span class="punctuation">)</span></span><br><span class="line"><span class="number">1.</span>rel <span class="operator">&lt;-</span> as.data.frame<span class="punctuation">(</span>table<span class="punctuation">(</span>temp<span class="operator">$</span>province<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="number">2.</span>provinces <span class="operator">&lt;-</span> rel<span class="operator">$</span>Var1</span><br><span class="line"><span class="number">3.</span>x <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"><span class="number">4.</span><span class="keyword">for</span><span class="punctuation">(</span>n <span class="keyword">in</span> provinces<span class="punctuation">)</span><span class="punctuation">&#123;</span></span><br><span class="line"><span class="number">5.</span>x<span class="punctuation">[</span><span class="built_in">length</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="operator">+</span><span class="number">1</span><span class="punctuation">]</span> <span class="operator">=</span> nrow<span class="punctuation">(</span>subset<span class="punctuation">(</span>temp<span class="punctuation">,</span><span class="punctuation">(</span>province<span class="operator">==</span>n<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="number">6.</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="number">7.</span>mapData <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span>province<span class="operator">=</span>rel<span class="operator">$</span>Var1<span class="punctuation">,</span></span><br><span class="line"><span class="number">8.</span>count<span class="operator">=</span>x<span class="punctuation">,</span> stringsAsFactors<span class="operator">=</span><span class="built_in">F</span><span class="punctuation">)</span> <span class="comment"># è®¾ç½®åœ°å›¾ä¿¡æ¯</span></span><br><span class="line"><span class="number">9.</span>eMap<span class="punctuation">(</span>mapData<span class="punctuation">,</span> namevar<span class="operator">=</span><span class="operator">~</span>province<span class="punctuation">,</span> datavar <span class="operator">=</span> <span class="operator">~</span>count<span class="punctuation">)</span> <span class="comment">#ç”»å‡ºä¸­å›½åœ°å›¾</span></span><br></pre></td></tr></table></figure>
<p>nrow()ç”¨æ¥è®¡ç®—æ•°æ®é›†çš„è¡Œæ•°ã€‚<br>åˆ†æç»“æœå¦‚ä¸‹å›¾:</p>
<p><img src="image-20230522200334675.png" alt="image-20230522200334675"></p>
</li>
</ol>
</li>
</ol>
<p>å¤§æ•°æ®æ¡ˆä¾‹ç½‘ç«™ç”¨æˆ·è´­ç‰©è¡Œä¸ºåˆ†ææ‰€æœ‰å®éªŒæ­¥éª¤åˆ°æ­¤ç»“æŸï¼</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://hanmengting.github.io">éŸ©æ¢¦å©·</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://hanmengting.github.io/2023/10/22/%E7%BD%91%E7%AB%99%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E5%88%86%E6%9E%90%EF%BC%88%E5%A4%A7%E6%95%B0%E6%8D%AE%E8%AF%BE%E8%AE%BE%EF%BC%89/">https://hanmengting.github.io/2023/10/22/%E7%BD%91%E7%AB%99%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E5%88%86%E6%9E%90%EF%BC%88%E5%A4%A7%E6%95%B0%E6%8D%AE%E8%AF%BE%E8%AE%BE%EF%BC%89/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://hanmengting.github.io" target="_blank">HikğŸ£</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="http://img.netbian.com/file/2024/0310/161609O75fK.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>èµåŠ©</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/10/22/js%E5%9F%BA%E6%9C%AC%E8%A6%81%E7%82%B9/" title="jsåŸºæœ¬è¦ç‚¹"><img class="cover" src="http://img.netbian.com/file/2023/0926/234201vj2AV.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">jsåŸºæœ¬è¦ç‚¹</div></div></a></div><div class="next-post pull-right"><a href="/2023/10/22/KVM-QEMU%E8%99%9A%E6%8B%9F%E5%8C%96%E7%8E%AF%E5%A2%83%E5%92%8C%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" title="KVM/QEMUè™šæ‹ŸåŒ–ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒæ­å»º"><img class="cover" src="http://img.netbian.com/file/2023/1022/210232lVk42.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">KVM/QEMUè™šæ‹ŸåŒ–ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒæ­å»º</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://p.qqan.com/up/2020-12/16086065967661528.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">éŸ©æ¢¦å©·</div><div class="author-info__description">ğŸŸ ï¼šåŒå‘çš„å¥”èµ´æ‰æœ‰æ„ä¹‰ğŸ¯</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">5</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/hanmengting"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">1.</span> <span class="toc-text">ä¸€. ç¯å¢ƒæ­å»º</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E4%B8%80%EF%BC%89%E5%AE%89%E8%A3%85Linux%E7%B3%BB%E7%BB%9F-ubuntu18-04-6"><span class="toc-number">1.1.</span> <span class="toc-text">ï¼ˆä¸€ï¼‰å®‰è£…Linuxç³»ç»Ÿ(ubuntu18.04.6)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E4%BA%8C%EF%BC%89%E5%AE%89%E8%A3%85Hadoop"><span class="toc-number">1.2.</span> <span class="toc-text">ï¼ˆäºŒï¼‰å®‰è£…Hadoop</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAhadoop%E7%94%A8%E6%88%B7"><span class="toc-number">1.2.1.</span> <span class="toc-text">åˆ›å»ºhadoopç”¨æˆ·</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0apt"><span class="toc-number">1.2.2.</span> <span class="toc-text">æ›´æ–°apt</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85ssh%E3%80%81%E9%85%8D%E7%BD%AEssh%E6%97%A0%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95"><span class="toc-number">1.2.3.</span> <span class="toc-text">å®‰è£…sshã€é…ç½®sshæ— å¯†ç ç™»å½•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Java%E7%8E%AF%E5%A2%83"><span class="toc-number">1.2.4.</span> <span class="toc-text">å®‰è£…Javaç¯å¢ƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Hadoop2-7-1"><span class="toc-number">1.2.5.</span> <span class="toc-text">å®‰è£…Hadoop2.7.1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hadoop%E5%8D%95%E6%9C%BA%E9%85%8D%E7%BD%AE-%E9%9D%9E%E5%88%86%E5%B8%83%E5%BC%8F"><span class="toc-number">1.2.6.</span> <span class="toc-text">Hadoopå•æœºé…ç½®(éåˆ†å¸ƒå¼)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.7.</span> <span class="toc-text">Hadoopä¼ªåˆ†å¸ƒå¼é…ç½®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%A1%8CHadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.2.8.</span> <span class="toc-text">è¿è¡ŒHadoopä¼ªåˆ†å¸ƒå¼å®ä¾‹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E4%B8%89%EF%BC%89%E5%AE%89%E8%A3%85MYSQL"><span class="toc-number">1.3.</span> <span class="toc-text">ï¼ˆä¸‰ï¼‰å®‰è£…MYSQL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E4%BB%A5%E4%B8%8B%E5%91%BD%E4%BB%A4%E5%8D%B3%E5%8F%AF%E8%BF%9B%E8%A1%8Cmysql%E5%AE%89%E8%A3%85%EF%BC%8C%E6%B3%A8%E6%84%8F%E5%AE%89%E8%A3%85%E5%89%8D%E5%85%88%E6%9B%B4%E6%96%B0%E4%B8%80%E4%B8%8B%E8%BD%AF%E4%BB%B6%E6%BA%90%E4%BB%A5%E8%8E%B7%E5%BE%97%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%EF%BC%9A"><span class="toc-number">1.3.1.</span> <span class="toc-text">ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯è¿›è¡Œmysqlå®‰è£…ï¼Œæ³¨æ„å®‰è£…å‰å…ˆæ›´æ–°ä¸€ä¸‹è½¯ä»¶æºä»¥è·å¾—æœ€æ–°ç‰ˆæœ¬ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDmysql-jdbc%E5%8C%85"><span class="toc-number">1.3.2.</span> <span class="toc-text">ä¸‹è½½mysql jdbcåŒ…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E5%B9%B6%E7%99%BB%E9%99%86mysql-shell"><span class="toc-number">1.3.3.</span> <span class="toc-text">å¯åŠ¨å¹¶ç™»é™†mysql shell</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%BB%BAhive%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.3.4.</span> <span class="toc-text">æ–°å»ºhiveæ•°æ®åº“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEmysql%E5%85%81%E8%AE%B8hive%E6%8E%A5%E5%85%A5"><span class="toc-number">1.3.5.</span> <span class="toc-text">é…ç½®mysqlå…è®¸hiveæ¥å…¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8hive"><span class="toc-number">1.3.6.</span> <span class="toc-text">å¯åŠ¨hive</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E5%9B%9B%EF%BC%89%E5%AE%89%E8%A3%85HBase"><span class="toc-number">1.4.</span> <span class="toc-text">ï¼ˆå››ï¼‰å®‰è£…HBase</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#hbase%E5%AE%89%E8%A3%85"><span class="toc-number">1.4.1.</span> <span class="toc-text">hbaseå®‰è£…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#hbase%E9%85%8D%E7%BD%AE"><span class="toc-number">1.4.2.</span> <span class="toc-text">hbaseé…ç½®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E8%BF%90%E8%A1%8CHBase"><span class="toc-number">1.4.3.</span> <span class="toc-text">æµ‹è¯•è¿è¡ŒHBase</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E4%BA%94%EF%BC%89%E5%AE%89%E8%A3%85Hive"><span class="toc-number">1.5.</span> <span class="toc-text">ï¼ˆäº”ï¼‰å®‰è£…Hive</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%B9%B6%E5%8A%A0%E5%8E%8Bhive%E5%AE%89%E8%A3%85%E5%8C%85"><span class="toc-number">1.5.1.</span> <span class="toc-text">ä¸‹è½½å¹¶åŠ å‹hiveå®‰è£…åŒ…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">1.5.2.</span> <span class="toc-text">é…ç½®ç¯å¢ƒå˜é‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-usr-local-hive-conf%E4%B8%8B%E7%9A%84hive-site-xml"><span class="toc-number">1.5.3.</span> <span class="toc-text">ä¿®æ”¹&#x2F;usr&#x2F;local&#x2F;hive&#x2F;confä¸‹çš„hive-site.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E5%AE%89%E8%A3%85%E5%AE%8Cmysql%E5%B9%B6%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%E4%B9%8B%E5%90%8E%E5%90%AF%E5%8A%A8hive"><span class="toc-number">1.5.4.</span> <span class="toc-text">åœ¨å®‰è£…å®Œmysqlå¹¶é…ç½®å®Œæˆä¹‹åå¯åŠ¨hive</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E5%85%AD%EF%BC%89%E5%AE%89%E8%A3%85Eclipse"><span class="toc-number">1.6.</span> <span class="toc-text">ï¼ˆå…­ï¼‰å®‰è£…Eclipse</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%88%E4%B8%83%EF%BC%89%E5%AE%89%E8%A3%85sqoop"><span class="toc-number">1.7.</span> <span class="toc-text">ï¼ˆä¸ƒï¼‰å®‰è£…sqoop</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%B9%B6%E8%A7%A3%E5%8E%8Bsqoop1-4-6"><span class="toc-number">1.7.1.</span> <span class="toc-text">ä¸‹è½½å¹¶è§£å‹sqoop1.4.6</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6sqoop-env-sh"><span class="toc-number">1.7.2.</span> <span class="toc-text">ä¿®æ”¹é…ç½®æ–‡ä»¶sqoop-env.sh</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-1"><span class="toc-number">1.7.3.</span> <span class="toc-text">é…ç½®ç¯å¢ƒå˜é‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%86mysql%E9%A9%B1%E5%8A%A8%E5%8C%85%E6%8B%B7%E8%B4%9D%E5%88%B0-SQOOP-HOME-lib"><span class="toc-number">1.7.4.</span> <span class="toc-text">å°†mysqlé©±åŠ¨åŒ…æ‹·è´åˆ°$SQOOP_HOME&#x2F;lib</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E4%B8%8EMySQL%E7%9A%84%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.7.5.</span> <span class="toc-text">æµ‹è¯•ä¸MySQLçš„è¿æ¥</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E7%BD%91%E7%AB%99%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E5%88%86%E6%9E%90"><span class="toc-number">2.</span> <span class="toc-text">äºŒ.ç½‘ç«™ç”¨æˆ·è¡Œä¸ºåˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E6%9C%AC%E5%9C%B0%E6%95%B0%E6%8D%AE%E9%9B%86%E4%B8%8A%E4%BC%A0%E5%88%B0%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93Hive"><span class="toc-number">2.1.</span> <span class="toc-text">ä¸€. æœ¬åœ°æ•°æ®é›†ä¸Šä¼ åˆ°æ•°æ®ä»“åº“Hive</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%9E%E9%AA%8C%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9A%84%E4%B8%8B%E8%BD%BD"><span class="toc-number">2.1.1.</span> <span class="toc-text">1. å®éªŒæ•°æ®é›†çš„ä¸‹è½½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9A%84%E9%A2%84%E5%A4%84%E7%90%86"><span class="toc-number">2.1.2.</span> <span class="toc-text">2.  æ•°æ®é›†çš„é¢„å¤„ç†</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-Hive%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90"><span class="toc-number">2.2.</span> <span class="toc-text">äºŒ. Hiveæ•°æ®åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%93%8D%E4%BD%9CHive"><span class="toc-number">2.2.1.</span> <span class="toc-text">1.æ“ä½œHive</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%AE%80%E5%8D%95%E6%9F%A5%E8%AF%A2%E5%88%86%E6%9E%90"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.ç®€å•æŸ¥è¯¢åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%9F%A5%E8%AF%A2%E6%9D%A1%E6%95%B0%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90"><span class="toc-number">2.2.3.</span> <span class="toc-text">3.æŸ¥è¯¢æ¡æ•°ç»Ÿè®¡åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%85%B3%E9%94%AE%E5%AD%97%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2%E5%88%86%E6%9E%90"><span class="toc-number">2.2.4.</span> <span class="toc-text">4.å…³é”®å­—æ¡ä»¶æŸ¥è¯¢åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%A0%B9%E6%8D%AE%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E5%88%86%E6%9E%90"><span class="toc-number">2.2.5.</span> <span class="toc-text">5.æ ¹æ®ç”¨æˆ·è¡Œä¸ºåˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E7%94%A8%E6%88%B7%E5%AE%9E%E6%97%B6%E6%9F%A5%E8%AF%A2%E5%88%86%E6%9E%90"><span class="toc-number">2.2.6.</span> <span class="toc-text">6.ç”¨æˆ·å®æ—¶æŸ¥è¯¢åˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-Hive-MYSQL-HBase%E6%95%B0%E6%8D%AE%E4%BA%92%E5%AF%BC"><span class="toc-number">2.3.</span> <span class="toc-text">ä¸‰.Hive,MYSQL,HBaseæ•°æ®äº’å¯¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Hive%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">2.3.1.</span> <span class="toc-text">1.Hiveå‡†å¤‡å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Hive%E9%A2%84%E6%93%8D%E4%BD%9C"><span class="toc-number">2.3.2.</span> <span class="toc-text">2.Hiveé¢„æ“ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8Sqoop%E5%B0%86%E6%95%B0%E6%8D%AE%E4%BB%8EHive%E5%AF%BC%E5%85%A5MYSQL"><span class="toc-number">2.3.3.</span> <span class="toc-text">3.ä½¿ç”¨Sqoopå°†æ•°æ®ä»Hiveå¯¼å…¥MYSQL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%BD%BF%E7%94%A8Sqoop%E5%B0%86%E6%95%B0%E6%8D%AE%E4%BB%8EMySQL%E5%AF%BC%E5%85%A5HBase"><span class="toc-number">2.3.4.</span> <span class="toc-text">4.ä½¿ç”¨Sqoopå°†æ•°æ®ä»MySQLå¯¼å…¥HBase</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E4%BD%BF%E7%94%A8HBase-Java-API%E6%8A%8A%E6%95%B0%E6%8D%AE%E4%BB%8E%E6%9C%AC%E5%9C%B0%E5%AF%BC%E5%85%A5%E5%88%B0HBase%E4%B8%AD"><span class="toc-number">2.3.5.</span> <span class="toc-text">5.ä½¿ç”¨HBase Java APIæŠŠæ•°æ®ä»æœ¬åœ°å¯¼å…¥åˆ°HBaseä¸­</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B-%E5%88%A9%E7%94%A8R%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%86%E6%9E%90"><span class="toc-number">2.4.</span> <span class="toc-text">å››.åˆ©ç”¨Rè¿›è¡Œæ•°æ®å¯è§†åŒ–åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%8E%AF%E5%A2%83"><span class="toc-number">2.4.1.</span> <span class="toc-text">1.ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85R%E8%AF%AD%E8%A8%80"><span class="toc-number">2.4.2.</span> <span class="toc-text">2.å®‰è£…Rè¯­è¨€</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%86%E6%9E%90MySQL%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">2.4.3.</span> <span class="toc-text">3.å¯è§†åŒ–åˆ†æMySQLä¸­çš„æ•°æ®</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%BA%93"><span class="toc-number">2.4.3.1.</span> <span class="toc-text">1.å®‰è£…ä¾èµ–åº“</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%88%86%E6%9E%90"><span class="toc-number">2.4.3.2.</span> <span class="toc-text">2.åˆ†æ</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/10/25/HTML%E7%AE%80%E4%BB%8B/" title="HTMLç®€ä»‹"><img src="http://img.netbian.com/file/2024/0111/004351ZZdk9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HTMLç®€ä»‹"/></a><div class="content"><a class="title" href="/2023/10/25/HTML%E7%AE%80%E4%BB%8B/" title="HTMLç®€ä»‹">HTMLç®€ä»‹</a><time datetime="2023-10-25T11:32:37.000Z" title="å‘è¡¨äº 2023-10-25 19:32:37">2023-10-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/22/KVM-QEMU%E8%99%9A%E6%8B%9F%E5%8C%96%E7%8E%AF%E5%A2%83%E5%92%8C%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" title="KVM/QEMUè™šæ‹ŸåŒ–ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒæ­å»º"><img src="http://img.netbian.com/file/2023/1022/210232lVk42.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="KVM/QEMUè™šæ‹ŸåŒ–ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒæ­å»º"/></a><div class="content"><a class="title" href="/2023/10/22/KVM-QEMU%E8%99%9A%E6%8B%9F%E5%8C%96%E7%8E%AF%E5%A2%83%E5%92%8C%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" title="KVM/QEMUè™šæ‹ŸåŒ–ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒæ­å»º">KVM/QEMUè™šæ‹ŸåŒ–ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒæ­å»º</a><time datetime="2023-10-22T10:08:19.000Z" title="å‘è¡¨äº 2023-10-22 18:08:19">2023-10-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/22/%E7%BD%91%E7%AB%99%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E5%88%86%E6%9E%90%EF%BC%88%E5%A4%A7%E6%95%B0%E6%8D%AE%E8%AF%BE%E8%AE%BE%EF%BC%89/" title="ç½‘ç«™ç”¨æˆ·è¡Œä¸ºåˆ†æï¼ˆå¤§æ•°æ®è¯¾è®¾ï¼‰"><img src="http://img.netbian.com/file/2024/0310/161609O75fK.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ç½‘ç«™ç”¨æˆ·è¡Œä¸ºåˆ†æï¼ˆå¤§æ•°æ®è¯¾è®¾ï¼‰"/></a><div class="content"><a class="title" href="/2023/10/22/%E7%BD%91%E7%AB%99%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E5%88%86%E6%9E%90%EF%BC%88%E5%A4%A7%E6%95%B0%E6%8D%AE%E8%AF%BE%E8%AE%BE%EF%BC%89/" title="ç½‘ç«™ç”¨æˆ·è¡Œä¸ºåˆ†æï¼ˆå¤§æ•°æ®è¯¾è®¾ï¼‰">ç½‘ç«™ç”¨æˆ·è¡Œä¸ºåˆ†æï¼ˆå¤§æ•°æ®è¯¾è®¾ï¼‰</a><time datetime="2023-10-22T10:05:55.000Z" title="å‘è¡¨äº 2023-10-22 18:05:55">2023-10-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/22/js%E5%9F%BA%E6%9C%AC%E8%A6%81%E7%82%B9/" title="jsåŸºæœ¬è¦ç‚¹"><img src="http://img.netbian.com/file/2023/0926/234201vj2AV.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jsåŸºæœ¬è¦ç‚¹"/></a><div class="content"><a class="title" href="/2023/10/22/js%E5%9F%BA%E6%9C%AC%E8%A6%81%E7%82%B9/" title="jsåŸºæœ¬è¦ç‚¹">jsåŸºæœ¬è¦ç‚¹</a><time datetime="2023-10-22T09:57:06.000Z" title="å‘è¡¨äº 2023-10-22 17:57:06">2023-10-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/22/css%E7%AE%80%E4%BB%8B/" title="cssç®€ä»‹"><img src="http://img.netbian.com/file/2024/0221/100206JM5bs.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="cssç®€ä»‹"/></a><div class="content"><a class="title" href="/2023/10/22/css%E7%AE%80%E4%BB%8B/" title="cssç®€ä»‹">cssç®€ä»‹</a><time datetime="2023-10-22T09:24:12.000Z" title="å‘è¡¨äº 2023-10-22 17:24:12">2023-10-22</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('http://img.netbian.com/file/2024/0310/161609O75fK.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By éŸ©æ¢¦å©·</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>